{"version":3,"file":"index.esm.js","sources":["../node_modules/@babel/runtime/helpers/extends/_index.mjs","../node_modules/@react-financial-charts/core/node_modules/d3-array/src/extent.js","../node_modules/@react-financial-charts/core/node_modules/d3-array/src/max.js","../node_modules/@react-financial-charts/core/node_modules/d3-array/src/min.js","../node_modules/@react-financial-charts/core/lib/utils/identity.js","../node_modules/@react-financial-charts/core/lib/utils/closestItem.js","../node_modules/@react-financial-charts/core/lib/utils/shallowEqual.js","../node_modules/@react-financial-charts/core/lib/utils/index.js","../node_modules/lodash.flattendeep/index.js","../node_modules/@react-financial-charts/core/lib/utils/ChartDataUtil.js","../node_modules/@react-financial-charts/core/lib/utils/zipper.js","../node_modules/d3-selection/src/namespaces.js","../node_modules/d3-selection/src/namespace.js","../node_modules/d3-selection/src/creator.js","../node_modules/d3-selection/src/selector.js","../node_modules/d3-selection/src/array.js","../node_modules/d3-selection/src/selectorAll.js","../node_modules/d3-selection/src/matcher.js","../node_modules/d3-selection/src/selection/selectChild.js","../node_modules/d3-selection/src/selection/selectChildren.js","../node_modules/d3-selection/src/selection/sparse.js","../node_modules/d3-selection/src/selection/enter.js","../node_modules/d3-selection/src/selection/data.js","../node_modules/d3-selection/src/selection/sort.js","../node_modules/d3-selection/src/selection/attr.js","../node_modules/d3-selection/src/window.js","../node_modules/d3-selection/src/selection/style.js","../node_modules/d3-selection/src/selection/property.js","../node_modules/d3-selection/src/selection/classed.js","../node_modules/d3-selection/src/selection/text.js","../node_modules/d3-selection/src/selection/html.js","../node_modules/d3-selection/src/selection/raise.js","../node_modules/d3-selection/src/selection/lower.js","../node_modules/d3-selection/src/selection/insert.js","../node_modules/d3-selection/src/selection/remove.js","../node_modules/d3-selection/src/selection/clone.js","../node_modules/d3-selection/src/selection/on.js","../node_modules/d3-selection/src/selection/dispatch.js","../node_modules/d3-selection/src/selection/index.js","../node_modules/d3-selection/src/select.js","../node_modules/d3-selection/src/sourceEvent.js","../node_modules/d3-selection/src/pointer.js","../node_modules/d3-selection/src/pointers.js","../node_modules/d3-selection/src/selection/select.js","../node_modules/d3-selection/src/selection/selectAll.js","../node_modules/d3-selection/src/selection/filter.js","../node_modules/d3-selection/src/constant.js","../node_modules/d3-selection/src/selection/exit.js","../node_modules/d3-selection/src/selection/join.js","../node_modules/d3-selection/src/selection/merge.js","../node_modules/d3-selection/src/selection/order.js","../node_modules/d3-selection/src/selection/call.js","../node_modules/d3-selection/src/selection/nodes.js","../node_modules/d3-selection/src/selection/node.js","../node_modules/d3-selection/src/selection/size.js","../node_modules/d3-selection/src/selection/empty.js","../node_modules/d3-selection/src/selection/each.js","../node_modules/d3-selection/src/selection/append.js","../node_modules/d3-selection/src/selection/datum.js","../node_modules/d3-selection/src/selection/iterator.js","../node_modules/@react-financial-charts/core/lib/EventCapture.js","../node_modules/@react-financial-charts/core/lib/CanvasContainer.js","../node_modules/@react-financial-charts/core/lib/utils/evaluator.js","../node_modules/@react-financial-charts/core/lib/ChartCanvas.js","../node_modules/@react-financial-charts/core/lib/zoom/zoomBehavior.js","../node_modules/@react-financial-charts/core/lib/Chart.js","../node_modules/@react-financial-charts/core/lib/GenericComponent.js","../node_modules/@react-financial-charts/core/lib/GenericChartComponent.js","../node_modules/@react-financial-charts/tooltip/lib/ToolTipText.js","../node_modules/@react-financial-charts/tooltip/lib/ToolTipTSpanLabel.js","../src/OHLCTooltip.js","../src/PriceChart.js","../src/utils/intervalUtils.js","../src/utils/dataTransformation.js","../src/TopBar.js","../src/LeftSidebar.js","../src/FooterBar.js","../src/TradingChart.js","../src/useMarketData.js","../src/lib/index.js"],"sourcesContent":["export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function(values, valueof) {\n  let min;\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  }\n  return [min, max];\n}\n","export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n","export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n","export const identity = (d) => d;\n//# sourceMappingURL=identity.js.map","export const getClosestItemIndexes = (array, value, accessor) => {\n    let lo = 0;\n    let hi = array.length - 1;\n    while (hi - lo > 1) {\n        const mid = Math.round((lo + hi) / 2);\n        const itemAtMid = array[mid];\n        const valueAtMid = accessor(itemAtMid);\n        if (valueAtMid <= value) {\n            lo = mid;\n        }\n        else {\n            hi = mid;\n        }\n    }\n    const lowItemValue = accessor(array[lo]);\n    const highItemValue = accessor(array[hi]);\n    // for Date object === does not work, so using the <= in combination with >=\n    // the same code works for both dates and numbers\n    if ((lowItemValue === null || lowItemValue === void 0 ? void 0 : lowItemValue.valueOf()) === (value === null || value === void 0 ? void 0 : value.valueOf())) {\n        hi = lo;\n    }\n    if ((highItemValue === null || highItemValue === void 0 ? void 0 : highItemValue.valueOf()) === (value === null || value === void 0 ? void 0 : value.valueOf())) {\n        lo = hi;\n    }\n    if (lowItemValue < value && highItemValue < value) {\n        lo = hi;\n    }\n    if (lowItemValue > value && highItemValue > value) {\n        hi = lo;\n    }\n    return { left: lo, right: hi };\n};\nexport const getClosestItem = (array, value, accessor) => {\n    const { left, right } = getClosestItemIndexes(array, value, accessor);\n    if (left === right) {\n        return array[left];\n    }\n    const leftItem = accessor(array[left]);\n    const rightItem = accessor(array[right]);\n    const closest = Math.abs(leftItem.valueOf() - value.valueOf()) < Math.abs(rightItem.valueOf() - value.valueOf())\n        ? array[left]\n        : array[right];\n    return closest;\n};\n//# sourceMappingURL=closestItem.js.map","export const shallowEqual = (a, b) => {\n    if (a === b) {\n        return true;\n    }\n    if (!(a instanceof Object) || !(b instanceof Object)) {\n        return false;\n    }\n    const keys = Object.keys(a);\n    const length = keys.length;\n    for (let i = 0; i < length; i++) {\n        if (!(keys[i] in b)) {\n            return false;\n        }\n    }\n    for (let i = 0; i < length; i++) {\n        if (a[keys[i]] !== b[keys[i]]) {\n            return false;\n        }\n    }\n    return length === Object.keys(b).length;\n};\n//# sourceMappingURL=shallowEqual.js.map","export { default as zipper } from \"./zipper\";\nexport { default as slidingWindow } from \"./slidingWindow\";\nexport * from \"./closestItem\";\nexport * from \"./identity\";\nexport * from \"./noop\";\nexport * from \"./shallowEqual\";\nexport { default as accumulatingWindow } from \"./accumulatingWindow\";\nexport * from \"./barWidth\";\nexport * from \"./strokeDasharray\";\nexport * from \"./PureComponent\";\nexport const sign = (x) => {\n    // @ts-ignore\n    return (x > 0) - (x < 0);\n};\nexport const path = (loc = []) => {\n    const key = Array.isArray(loc) ? loc : [loc];\n    const length = key.length;\n    return function (obj, defaultValue) {\n        if (length === 0) {\n            return isDefined(obj) ? obj : defaultValue;\n        }\n        let index = 0;\n        while (obj != null && index < length) {\n            obj = obj[key[index++]];\n        }\n        return index === length ? obj : defaultValue;\n    };\n};\nexport const functor = (v) => {\n    return typeof v === \"function\" ? v : () => v;\n};\nexport function getClosestValue(inputValue, currentValue) {\n    const values = Array.isArray(inputValue) ? inputValue : [inputValue];\n    const diff = values\n        .map((each) => each - currentValue)\n        .reduce((diff1, diff2) => (Math.abs(diff1) < Math.abs(diff2) ? diff1 : diff2));\n    return currentValue + diff;\n}\nexport function d3Window(node) {\n    const d3win = node && ((node.ownerDocument && node.ownerDocument.defaultView) || (node.document && node) || node.defaultView);\n    return d3win;\n}\nexport const MOUSEENTER = \"mouseenter.interaction\";\nexport const MOUSELEAVE = \"mouseleave.interaction\";\nexport const MOUSEMOVE = \"mousemove.pan\";\nexport const MOUSEUP = \"mouseup.pan\";\nexport const TOUCHMOVE = \"touchmove.pan\";\nexport const TOUCHEND = \"touchend.pan touchcancel.pan\";\nexport function getTouchProps(touch) {\n    return {\n        pageX: touch.pageX,\n        pageY: touch.pageY,\n        clientX: touch.clientX,\n        clientY: touch.clientY,\n    };\n}\nexport function head(array, accessor) {\n    if (accessor && array) {\n        let value;\n        // tslint:disable-next-line: prefer-for-of\n        for (let i = 0; i < array.length; i++) {\n            value = array[i];\n            if (isDefined(accessor(value))) {\n                return value;\n            }\n        }\n        return undefined;\n    }\n    return array ? array[0] : undefined;\n}\nexport const first = head;\nexport function last(array, accessor) {\n    if (accessor && array) {\n        let value;\n        for (let i = array.length - 1; i >= 0; i--) {\n            value = array[i];\n            if (isDefined(accessor(value))) {\n                return value;\n            }\n        }\n        return undefined;\n    }\n    const length = array ? array.length : 0;\n    return length ? array[length - 1] : undefined;\n}\nexport const isDefined = (d) => {\n    return d !== null && d !== undefined;\n};\nexport function isNotDefined(d) {\n    return !isDefined(d);\n}\nexport function isObject(d) {\n    return isDefined(d) && typeof d === \"object\" && !Array.isArray(d);\n}\nexport function touchPosition(touch, e) {\n    const container = e.currentTarget;\n    const rect = container.getBoundingClientRect();\n    const x = touch.clientX - rect.left - container.clientLeft;\n    const y = touch.clientY - rect.top - container.clientTop;\n    return [Math.round(x), Math.round(y)];\n}\nexport function mousePosition(e, defaultRect) {\n    const container = e.currentTarget;\n    const rect = defaultRect !== null && defaultRect !== void 0 ? defaultRect : container.getBoundingClientRect();\n    const x = e.clientX - rect.left - container.clientLeft;\n    const y = e.clientY - rect.top - container.clientTop;\n    return [Math.round(x), Math.round(y)];\n}\nexport function clearCanvas(canvasList, ratio) {\n    canvasList.forEach((each) => {\n        each.setTransform(1, 0, 0, 1, 0, 0);\n        each.clearRect(-1, -1, each.canvas.width + 2, each.canvas.height + 2);\n        each.scale(ratio, ratio);\n    });\n}\n// copied from https://github.com/lodash/lodash/blob/master/mapObject.js\nexport function mapObject(object = {}, iteratee = (x) => x) {\n    const props = Object.keys(object);\n    const result = new Array(props.length);\n    props.forEach((key, index) => {\n        // @ts-ignore\n        result[index] = iteratee(object[key], key, object);\n    });\n    return result;\n}\n//# sourceMappingURL=index.js.map","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\n/**\n * Recursively flattens `array`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flattenDeep([1, [2, [3, [4]], 5]]);\n * // => [1, 2, 3, 4, 5]\n */\nfunction flattenDeep(array) {\n  var length = array ? array.length : 0;\n  return length ? baseFlatten(array, INFINITY) : [];\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\nmodule.exports = flattenDeep;\n","import { extent } from \"d3-array\";\nimport { scaleLinear } from \"d3-scale\";\nimport flattenDeep from \"lodash.flattendeep\";\nimport * as React from \"react\";\nimport { functor, getClosestItem, isNotDefined, isObject, last, mapObject, shallowEqual, zipper } from \"./index\";\nexport const ChartDefaultConfig = {\n    flipYScale: false,\n    id: 0,\n    origin: [0, 0],\n    padding: 0,\n    yPan: true,\n    yPanEnabled: false,\n    yScale: scaleLinear(),\n};\nexport function getChartOrigin(origin, contextWidth, contextHeight) {\n    const originCoordinates = typeof origin === \"function\" ? origin(contextWidth, contextHeight) : origin;\n    return originCoordinates;\n}\nexport function getDimensions({ width, height }, chartProps) {\n    const chartHeight = chartProps.height || height;\n    return {\n        availableHeight: height,\n        width,\n        height: chartHeight,\n    };\n}\nfunction values(func) {\n    return (d) => {\n        const obj = func(d);\n        if (isObject(obj)) {\n            return mapObject(obj);\n        }\n        return obj;\n    };\n}\nfunction isArraySize2AndNumber(yExtentsProp) {\n    if (Array.isArray(yExtentsProp) && yExtentsProp.length === 2) {\n        const [a, b] = yExtentsProp;\n        return typeof a === \"number\" && typeof b === \"number\";\n    }\n    return false;\n}\nconst isChartProps = (props) => {\n    if (props === undefined) {\n        return false;\n    }\n    const chartProps = props;\n    if (chartProps.id === undefined) {\n        return false;\n    }\n    return true;\n};\nexport function getNewChartConfig(innerDimension, children, existingChartConfig = []) {\n    return React.Children.map(children, (each) => {\n        if (!each || !isChartProps(each.props)) {\n            return undefined;\n        }\n        const chartProps = Object.assign(Object.assign({}, ChartDefaultConfig), each.props);\n        const { id, origin, padding, yExtents: yExtentsProp, yScale: yScaleProp = ChartDefaultConfig.yScale, flipYScale, yExtentsCalculator, } = chartProps;\n        const yScale = yScaleProp.copy();\n        const { width, height, availableHeight } = getDimensions(innerDimension, chartProps);\n        const { yPan } = chartProps;\n        let { yPanEnabled } = chartProps;\n        const yExtents = yExtentsProp\n            ? (Array.isArray(yExtentsProp) ? yExtentsProp : [yExtentsProp]).map(functor)\n            : undefined;\n        const prevChartConfig = existingChartConfig.find((d) => d.id === id);\n        if (isArraySize2AndNumber(yExtentsProp)) {\n            if (!!prevChartConfig &&\n                prevChartConfig.yPan &&\n                prevChartConfig.yPanEnabled &&\n                yPan &&\n                yPanEnabled &&\n                shallowEqual(prevChartConfig.originalYExtentsProp, yExtentsProp)) {\n                yScale.domain(prevChartConfig.yScale.domain());\n            }\n            else {\n                const [a, b] = yExtentsProp;\n                yScale.domain([a, b]);\n            }\n        }\n        else if (!!prevChartConfig && prevChartConfig.yPanEnabled) {\n            if (isArraySize2AndNumber(prevChartConfig.originalYExtentsProp)) {\n                // do nothing\n            }\n            else {\n                yScale.domain(prevChartConfig.yScale.domain());\n                yPanEnabled = true;\n            }\n        }\n        return {\n            id,\n            origin: functor(origin)(width, availableHeight),\n            padding,\n            originalYExtentsProp: yExtentsProp,\n            yExtents,\n            yExtentsCalculator,\n            flipYScale,\n            yScale,\n            yPan,\n            yPanEnabled,\n            width,\n            height,\n        };\n    }).filter((each) => each !== undefined);\n}\nexport function getCurrentCharts(chartConfig, mouseXY) {\n    const currentCharts = chartConfig\n        .filter((eachConfig) => {\n        const top = eachConfig.origin[1];\n        const bottom = top + eachConfig.height;\n        return mouseXY[1] > top && mouseXY[1] < bottom;\n    })\n        .map((config) => config.id);\n    return currentCharts;\n}\nfunction setRange(scale, height, padding, flipYScale) {\n    if (scale.rangeRoundPoints || isNotDefined(scale.invert)) {\n        if (isNaN(padding)) {\n            throw new Error(\"padding has to be a number for ordinal scale\");\n        }\n        if (scale.rangeRoundPoints) {\n            scale.rangeRoundPoints(flipYScale ? [0, height] : [height, 0], padding);\n        }\n        if (scale.rangeRound) {\n            scale.range(flipYScale ? [0, height] : [height, 0]).padding(padding);\n        }\n    }\n    else {\n        const { top, bottom } = isNaN(padding) ? padding : { top: padding, bottom: padding };\n        scale.range(flipYScale ? [top, height - bottom] : [height - bottom, top]);\n    }\n    return scale;\n}\nfunction yDomainFromYExtents(yExtents, yScale, plotData) {\n    const yValues = yExtents.map((eachExtent) => plotData.map(values(eachExtent)));\n    const allYValues = flattenDeep(yValues);\n    const realYDomain = yScale.invert ? extent(allYValues) : [...new Set(allYValues).values()];\n    return realYDomain;\n}\nexport function getChartConfigWithUpdatedYScales(chartConfig, { plotData, xAccessor, displayXAccessor, fullData }, xDomain, dy, chartsToPan) {\n    const yDomains = chartConfig.map(({ yExtentsCalculator, yExtents, yScale }) => {\n        const realYDomain = yExtentsCalculator\n            ? yExtentsCalculator({ plotData, xDomain, xAccessor, displayXAccessor, fullData })\n            : yDomainFromYExtents(yExtents, yScale, plotData);\n        const yDomainDY = dy !== undefined\n            ? yScale\n                .range()\n                .map((each) => each - dy)\n                .map(yScale.invert)\n            : yScale.domain();\n        return {\n            realYDomain,\n            yDomainDY,\n            prevYDomain: yScale.domain(),\n        };\n    });\n    const combine = zipper().combine((config, { realYDomain, yDomainDY, prevYDomain }) => {\n        const { id, padding, height, yScale, yPan, flipYScale, yPanEnabled = false } = config;\n        const another = chartsToPan !== undefined ? chartsToPan.indexOf(id) > -1 : true;\n        const domain = yPan && yPanEnabled ? (another ? yDomainDY : prevYDomain) : realYDomain;\n        const newYScale = setRange(yScale.copy().domain(domain), height, padding, flipYScale);\n        return Object.assign(Object.assign({}, config), { yScale: newYScale, realYDomain });\n    });\n    const updatedChartConfig = combine(chartConfig, yDomains);\n    return updatedChartConfig;\n}\nexport function getCurrentItem(xScale, xAccessor, mouseXY, plotData) {\n    let xValue;\n    let item;\n    if (xScale.invert) {\n        xValue = xScale.invert(mouseXY[0]);\n        item = getClosestItem(plotData, xValue, xAccessor);\n    }\n    else {\n        const dr = xScale\n            .range()\n            .map((d, idx) => ({ x: Math.abs(d - mouseXY[0]), idx }))\n            .reduce((a, b) => (a.x < b.x ? a : b));\n        item = dr !== undefined ? plotData[dr.idx] : plotData[0];\n    }\n    return item;\n}\nexport function getXValue(xScale, xAccessor, mouseXY, plotData) {\n    let xValue;\n    let item;\n    if (xScale.invert) {\n        xValue = xScale.invert(mouseXY[0]);\n        if (xValue > xAccessor(last(plotData))) {\n            return Math.round(xValue.valueOf());\n        }\n        else {\n            item = getClosestItem(plotData, xValue, xAccessor);\n        }\n    }\n    else {\n        const dr = xScale\n            .range()\n            .map((d, idx) => ({ x: Math.abs(d - mouseXY[0]), idx }))\n            .reduce((a, b) => (a.x < b.x ? a : b));\n        item = dr !== undefined ? plotData[dr.idx] : plotData[0];\n    }\n    return xAccessor(item);\n}\n//# sourceMappingURL=ChartDataUtil.js.map","/* an extension to d3.zip so we call a function instead of an array */\nimport { min } from \"d3-array\";\nimport { identity } from \"./identity\";\nexport default function zipper() {\n    let combine = identity;\n    function zip() {\n        var _a;\n        const n = arguments.length;\n        if (n === 0) {\n            return [];\n        }\n        const m = (_a = min(arguments, d3_zipLength)) !== null && _a !== void 0 ? _a : 0;\n        const zips = new Array(m);\n        for (let i = -1; ++i < m;) {\n            // tslint:disable-next-line: no-shadowed-variable\n            for (let j = -1, zip = (zips[i] = new Array(n)); ++j < n;) {\n                zip[j] = arguments[j][i];\n            }\n            // @ts-ignore\n            zips[i] = combine.apply(this, zips[i]);\n        }\n        return zips;\n    }\n    function d3_zipLength(d) {\n        return d.length;\n    }\n    zip.combine = function (x) {\n        if (!arguments.length) {\n            return combine;\n        }\n        combine = x;\n        return zip;\n    };\n    return zip;\n}\n//# sourceMappingURL=zipper.js.map","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","export default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return this.children;\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport array from \"../array.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that don’t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = array(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","import pointer from \"./pointer.js\";\nimport sourceEvent from \"./sourceEvent.js\";\n\nexport default function(events, node) {\n  if (events.target) { // i.e., instanceof Event, not TouchList or iterable\n    events = sourceEvent(events);\n    if (node === undefined) node = events.currentTarget;\n    events = events.touches || [events];\n  }\n  return Array.from(events, event => pointer(event, node));\n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    var group = select.apply(this, arguments);\n    return group == null ? [] : array(group);\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  enter = typeof onenter === \"function\" ? onenter(enter) : enter.append(onenter + \"\");\n  if (onupdate != null) update = onupdate(update);\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(selection) {\n  if (!(selection instanceof Selection)) throw new Error(\"invalid merge\");\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { pointer, pointers, select } from \"d3-selection\";\nimport * as React from \"react\";\nimport { d3Window, getTouchProps, MOUSEENTER, MOUSELEAVE, MOUSEMOVE, mousePosition, MOUSEUP, TOUCHEND, TOUCHMOVE, touchPosition, } from \"./utils\";\nimport { getCurrentCharts } from \"./utils/ChartDataUtil\";\nexport class EventCapture extends React.Component {\n    constructor(props) {\n        super(props);\n        this.dx = 0;\n        this.dy = 0;\n        this.mouseInside = false;\n        this.mouseInteraction = true;\n        this.ref = React.createRef();\n        this.handleEnter = (e) => {\n            const { onMouseEnter } = this.props;\n            if (onMouseEnter === undefined) {\n                return;\n            }\n            this.mouseInside = true;\n            if (!this.state.panInProgress && !this.state.dragInProgress) {\n                const win = d3Window(this.ref.current);\n                select(win).on(MOUSEMOVE, this.handleMouseMove);\n            }\n            onMouseEnter(e);\n        };\n        this.handleLeave = (e) => {\n            const { onMouseLeave } = this.props;\n            if (onMouseLeave === undefined) {\n                return;\n            }\n            this.mouseInside = false;\n            if (!this.state.panInProgress && !this.state.dragInProgress) {\n                const win = d3Window(this.ref.current);\n                select(win).on(MOUSEMOVE, null);\n            }\n            onMouseLeave(e);\n        };\n        this.handleWheel = (e) => {\n            const { pan, onPan, zoom, onZoom } = this.props;\n            if (!pan && !zoom) {\n                return;\n            }\n            const { panInProgress } = this.state;\n            const yZoom = Math.abs(e.deltaY) > Math.abs(e.deltaX) && Math.abs(e.deltaY) > 0;\n            const mouseXY = mousePosition(e);\n            e.preventDefault();\n            if (zoom && this.focus && yZoom && !panInProgress) {\n                const zoomDir = e.deltaY > 0 ? 1 : -1;\n                if (onZoom !== undefined) {\n                    onZoom(zoomDir, mouseXY, e);\n                }\n            }\n            else if (this.focus) {\n                if (this.shouldPan() && this.state.panStart !== undefined) {\n                    // pan already in progress\n                    const { panStartXScale, chartsToPan } = this.state.panStart;\n                    this.lastNewPos = mouseXY;\n                    this.panHappened = true;\n                    if (this.dx === undefined) {\n                        this.dx = 0;\n                    }\n                    if (this.dy === undefined) {\n                        this.dy = 0;\n                    }\n                    this.dx -= e.deltaX;\n                    this.dy += e.deltaY;\n                    const dxdy = { dx: this.dx, dy: this.dy };\n                    if (onPan !== undefined) {\n                        onPan(mouseXY, panStartXScale, dxdy, chartsToPan, e);\n                    }\n                }\n                else {\n                    const { xScale, chartConfig } = this.props;\n                    const currentCharts = getCurrentCharts(chartConfig, mouseXY);\n                    this.dx = 0;\n                    this.dy = 0;\n                    this.setState({\n                        panInProgress: true,\n                        panStart: {\n                            panStartXScale: xScale,\n                            panOrigin: mouseXY,\n                            chartsToPan: currentCharts,\n                        },\n                    });\n                }\n                this.queuePanEnd(e);\n            }\n        };\n        this.handleMouseMove = (e) => {\n            const { onMouseMove, mouseMove } = this.props;\n            if (onMouseMove === undefined) {\n                return;\n            }\n            if (this.mouseInteraction && mouseMove && !this.state.panInProgress) {\n                const newPos = pointer(e, this.ref.current);\n                onMouseMove(newPos, \"mouse\", e);\n            }\n        };\n        this.handleClick = (e) => {\n            const mouseXY = mousePosition(e);\n            const { onClick, onDoubleClick } = this.props;\n            if (!this.panHappened && !this.dragHappened) {\n                if (this.clicked && onDoubleClick !== undefined) {\n                    onDoubleClick(mouseXY, e);\n                    this.clicked = false;\n                }\n                else if (onClick !== undefined) {\n                    onClick(mouseXY, e);\n                    this.clicked = true;\n                    setTimeout(() => {\n                        if (this.clicked) {\n                            this.clicked = false;\n                        }\n                    }, 400);\n                }\n            }\n        };\n        this.handleRightClick = (e) => {\n            e.stopPropagation();\n            e.preventDefault();\n            const { onContextMenu, onPanEnd } = this.props;\n            const mouseXY = mousePosition(e, this.ref.current.getBoundingClientRect());\n            if (this.state.panStart !== undefined) {\n                const { panStartXScale, panOrigin: [dx, dy], chartsToPan, } = this.state.panStart;\n                if (this.panHappened && onPanEnd !== undefined) {\n                    onPanEnd(mouseXY, panStartXScale, { dx, dy }, chartsToPan, e);\n                }\n                const win = d3Window(this.ref.current);\n                select(win).on(MOUSEMOVE, null).on(MOUSEUP, null);\n                this.setState({\n                    panInProgress: false,\n                    panStart: undefined,\n                });\n            }\n            if (onContextMenu !== undefined) {\n                onContextMenu(mouseXY, e);\n            }\n        };\n        this.handleDrag = (e) => {\n            const { onDrag } = this.props;\n            if (onDrag === undefined) {\n                return;\n            }\n            this.dragHappened = true;\n            const { dragStartPosition } = this.state;\n            if (dragStartPosition === undefined) {\n                return;\n            }\n            const mouseXY = pointer(e, this.ref.current);\n            onDrag({\n                startPos: dragStartPosition,\n                mouseXY,\n            }, e);\n        };\n        this.handleDragEnd = (e) => {\n            const mouseXY = pointer(e, this.ref.current);\n            const win = d3Window(this.ref.current);\n            select(win)\n                // @ts-ignore\n                .on(MOUSEMOVE, this.mouseInside ? this.handleMouseMove : null)\n                .on(MOUSEUP, null);\n            if (this.dragHappened) {\n                const { onDragComplete } = this.props;\n                if (onDragComplete !== undefined) {\n                    onDragComplete({ mouseXY }, e);\n                }\n            }\n            this.setState({\n                dragInProgress: false,\n            });\n            this.mouseInteraction = true;\n        };\n        this.canPan = () => {\n            const { getAllPanConditions } = this.props;\n            const { pan: initialPanEnabled } = this.props;\n            const { panEnabled, draggable: somethingSelected } = getAllPanConditions().reduce((returnObj, a) => {\n                return {\n                    draggable: returnObj.draggable || a.draggable,\n                    panEnabled: returnObj.panEnabled && a.panEnabled,\n                };\n            }, {\n                draggable: false,\n                panEnabled: initialPanEnabled,\n            });\n            return {\n                panEnabled,\n                somethingSelected,\n            };\n        };\n        this.handleMouseDown = (e) => {\n            if (e.button !== 0) {\n                return;\n            }\n            const { xScale, chartConfig, onMouseDown } = this.props;\n            this.panHappened = false;\n            this.dragHappened = false;\n            this.focus = true;\n            if (!this.state.panInProgress && this.mouseInteraction) {\n                const mouseXY = mousePosition(e);\n                const currentCharts = getCurrentCharts(chartConfig, mouseXY);\n                const { panEnabled, somethingSelected } = this.canPan();\n                const pan = panEnabled && !somethingSelected;\n                if (pan) {\n                    this.setState({\n                        panInProgress: pan,\n                        panStart: {\n                            panStartXScale: xScale,\n                            panOrigin: mouseXY,\n                            chartsToPan: currentCharts,\n                        },\n                    });\n                    const win = d3Window(this.ref.current);\n                    select(win).on(MOUSEMOVE, this.handlePan).on(MOUSEUP, this.handlePanEnd);\n                }\n                else if (somethingSelected) {\n                    this.setState({\n                        panInProgress: false,\n                        dragInProgress: true,\n                        panStart: undefined,\n                        dragStartPosition: mouseXY,\n                    });\n                    const { onDragStart } = this.props;\n                    if (onDragStart !== undefined) {\n                        onDragStart({ startPos: mouseXY }, e);\n                    }\n                    const win = d3Window(this.ref.current);\n                    select(win).on(MOUSEMOVE, this.handleDrag).on(MOUSEUP, this.handleDragEnd);\n                }\n                if (onMouseDown !== undefined) {\n                    onMouseDown(mouseXY, currentCharts, e);\n                }\n            }\n            e.preventDefault();\n        };\n        this.shouldPan = () => {\n            const { pan: panEnabled, onPan } = this.props;\n            return panEnabled && onPan && this.state.panStart !== undefined;\n        };\n        this.handlePan = (e) => {\n            if (this.shouldPan() && this.state.panStart !== undefined) {\n                this.panHappened = true;\n                const { panStartXScale, panOrigin, chartsToPan } = this.state.panStart;\n                let dx;\n                let dy;\n                let mouseXY;\n                if (this.mouseInteraction) {\n                    mouseXY = pointer(e, this.ref.current);\n                    this.lastNewPos = mouseXY;\n                    dx = mouseXY[0] - panOrigin[0];\n                    dy = mouseXY[1] - panOrigin[1];\n                }\n                else {\n                    mouseXY = pointers(e, this.ref.current)[0];\n                    this.lastNewPos = mouseXY;\n                    dx = panOrigin[0] - mouseXY[0];\n                    dy = panOrigin[1] - mouseXY[1];\n                }\n                this.dx = dx;\n                this.dy = dy;\n                const { onPan } = this.props;\n                if (onPan !== undefined) {\n                    onPan(mouseXY, panStartXScale, { dx, dy }, chartsToPan, e);\n                }\n            }\n        };\n        this.handlePanEnd = (e) => {\n            const { pan: panEnabled, onPanEnd } = this.props;\n            if (this.state.panStart !== undefined) {\n                const { panStartXScale, chartsToPan } = this.state.panStart;\n                const win = d3Window(this.ref.current);\n                select(win)\n                    // @ts-ignore\n                    .on(MOUSEMOVE, this.mouseInside ? this.handleMouseMove : null)\n                    .on(MOUSEUP, null)\n                    .on(TOUCHMOVE, null)\n                    .on(TOUCHEND, null);\n                if (this.panHappened && panEnabled && onPanEnd) {\n                    const { dx = 0, dy = 0 } = this;\n                    delete this.dx;\n                    delete this.dy;\n                    if (this.lastNewPos !== undefined) {\n                        onPanEnd(this.lastNewPos, panStartXScale, { dx, dy }, chartsToPan, e);\n                    }\n                }\n                this.setState({\n                    panInProgress: false,\n                    panStart: undefined,\n                });\n            }\n        };\n        this.handleTouchMove = (e) => {\n            const { onMouseMove } = this.props;\n            if (onMouseMove === undefined) {\n                return;\n            }\n            const touch = getTouchProps(e.touches[0]);\n            const touchXY = touchPosition(touch, e);\n            onMouseMove(touchXY, \"touch\", e);\n        };\n        this.handleTouchStart = (e) => {\n            this.mouseInteraction = false;\n            const { pan: panEnabled, chartConfig, onMouseMove, xScale, onPanEnd } = this.props;\n            if (e.touches.length === 1) {\n                this.panHappened = false;\n                const touchXY = touchPosition(getTouchProps(e.touches[0]), e);\n                if (onMouseMove !== undefined) {\n                    onMouseMove(touchXY, \"touch\", e);\n                }\n                if (panEnabled) {\n                    const currentCharts = getCurrentCharts(chartConfig, touchXY);\n                    this.setState({\n                        panInProgress: true,\n                        panStart: {\n                            panStartXScale: xScale,\n                            panOrigin: touchXY,\n                            chartsToPan: currentCharts,\n                        },\n                    });\n                    const win = d3Window(this.ref.current);\n                    select(win).on(TOUCHMOVE, this.handlePan, false).on(TOUCHEND, this.handlePanEnd, false);\n                }\n            }\n            else if (e.touches.length === 2) {\n                // pinch zoom begin\n                // do nothing pinch zoom is handled in handleTouchMove\n                const { panInProgress, panStart } = this.state;\n                if (panInProgress && panEnabled && onPanEnd && panStart !== undefined) {\n                    const { panStartXScale, panOrigin: [dx, dy], chartsToPan, } = panStart;\n                    const win = d3Window(this.ref.current);\n                    select(win)\n                        // @ts-ignore\n                        .on(MOUSEMOVE, this.mouseInside ? this.handleMouseMove : null)\n                        .on(MOUSEUP, null)\n                        .on(TOUCHMOVE, this.handlePinchZoom, false)\n                        .on(TOUCHEND, this.handlePinchZoomEnd, false);\n                    const touch1Pos = touchPosition(getTouchProps(e.touches[0]), e);\n                    const touch2Pos = touchPosition(getTouchProps(e.touches[1]), e);\n                    if (this.panHappened && panEnabled && onPanEnd && this.lastNewPos !== undefined) {\n                        onPanEnd(this.lastNewPos, panStartXScale, { dx, dy }, chartsToPan, e);\n                    }\n                    this.setState({\n                        panInProgress: false,\n                        pinchZoomStart: {\n                            xScale,\n                            touch1Pos,\n                            touch2Pos,\n                            range: xScale.range(),\n                            chartsToPan,\n                        },\n                    });\n                }\n            }\n        };\n        this.handlePinchZoom = (e) => {\n            const { pinchZoomStart } = this.state;\n            if (pinchZoomStart === undefined) {\n                return;\n            }\n            const { xScale, zoom: zoomEnabled, onPinchZoom } = this.props;\n            if (!zoomEnabled || onPinchZoom === undefined) {\n                return;\n            }\n            const [touch1Pos, touch2Pos] = pointers(this.ref.current);\n            const { chartsToPan } = pinchZoomStart, initialPinch = __rest(pinchZoomStart, [\"chartsToPan\"]);\n            onPinchZoom(initialPinch, {\n                touch1Pos,\n                touch2Pos,\n                xScale,\n            }, e);\n        };\n        this.handlePinchZoomEnd = (e) => {\n            const win = d3Window(this.ref.current);\n            select(win).on(TOUCHMOVE, null).on(TOUCHEND, null);\n            const { pinchZoomStart } = this.state;\n            if (pinchZoomStart === undefined) {\n                return;\n            }\n            const { chartsToPan } = pinchZoomStart, initialPinch = __rest(pinchZoomStart, [\"chartsToPan\"]);\n            const { zoom: zoomEnabled, onPinchZoomEnd } = this.props;\n            if (zoomEnabled && onPinchZoomEnd) {\n                onPinchZoomEnd(initialPinch, e);\n            }\n            this.setState({\n                pinchZoomStart: undefined,\n            });\n        };\n        this.setCursorClass = (cursorOverrideClass) => {\n            if (cursorOverrideClass !== this.state.cursorOverrideClass) {\n                this.setState({\n                    cursorOverrideClass: cursorOverrideClass === null ? undefined : cursorOverrideClass,\n                });\n            }\n        };\n        this.focus = props.focus;\n        this.state = {\n            panInProgress: false,\n        };\n    }\n    componentDidMount() {\n        const { disableInteraction } = this.props;\n        const { current } = this.ref;\n        if (current === null) {\n            return;\n        }\n        if (!disableInteraction) {\n            // @ts-ignore\n            select(current).on(MOUSEENTER, this.handleEnter).on(MOUSELEAVE, this.handleLeave);\n            // @ts-ignore\n            current.addEventListener(\"wheel\", this.handleWheel, { passive: false });\n        }\n    }\n    componentDidUpdate() {\n        this.componentDidMount();\n    }\n    componentWillUnmount() {\n        const { disableInteraction } = this.props;\n        const { current } = this.ref;\n        if (current === null) {\n            return;\n        }\n        if (!disableInteraction) {\n            select(current).on(MOUSEENTER, null).on(MOUSELEAVE, null);\n            const win = d3Window(current);\n            select(win).on(MOUSEMOVE, null);\n            // @ts-ignore\n            current.removeEventListener(\"wheel\", this.handleWheel, { passive: false });\n        }\n    }\n    queuePanEnd(e) {\n        if (this.panEndTimeout !== undefined) {\n            window.clearTimeout(this.panEndTimeout);\n        }\n        this.panEndTimeout = window.setTimeout(() => {\n            this.handlePanEnd(e);\n        }, 100);\n    }\n    cancelDrag() {\n        const win = d3Window(this.ref.current);\n        select(win)\n            // @ts-ignore\n            .on(MOUSEMOVE, this.mouseInside ? this.handleMouseMove : null)\n            .on(MOUSEUP, null);\n        this.setState({\n            dragInProgress: false,\n        });\n        this.mouseInteraction = true;\n    }\n    render() {\n        const { height, width, disableInteraction, useCrossHairStyleCursor } = this.props;\n        const className = disableInteraction\n            ? undefined\n            : this.state.cursorOverrideClass !== undefined\n                ? this.state.cursorOverrideClass\n                : !useCrossHairStyleCursor\n                    ? undefined\n                    : this.state.panInProgress\n                        ? \"react-financial-charts-grabbing-cursor\"\n                        : \"react-financial-charts-crosshair-cursor\";\n        const interactionProps = disableInteraction\n            ? undefined\n            : {\n                onMouseDown: this.handleMouseDown,\n                onClick: this.handleClick,\n                onContextMenu: this.handleRightClick,\n                onTouchStart: this.handleTouchStart,\n                onTouchMove: this.handleTouchMove,\n            };\n        return (React.createElement(\"rect\", Object.assign({ ref: this.ref, className: className, width: width, height: height, style: { opacity: 0 } }, interactionProps)));\n    }\n}\nEventCapture.defaultProps = {\n    mouseMove: false,\n    zoom: false,\n    pan: false,\n    panSpeedMultiplier: 1,\n    focus: false,\n    disableInteraction: false,\n};\n//# sourceMappingURL=EventCapture.js.map","import * as React from \"react\";\nexport class CanvasContainer extends React.PureComponent {\n    constructor() {\n        super(...arguments);\n        this.bgRef = React.createRef();\n        this.axesRef = React.createRef();\n        this.mouseRef = React.createRef();\n    }\n    getCanvasContexts() {\n        var _a, _b, _c, _d, _e, _f;\n        return {\n            bg: (_b = (_a = this.bgRef.current) === null || _a === void 0 ? void 0 : _a.getContext(\"2d\")) !== null && _b !== void 0 ? _b : undefined,\n            axes: (_d = (_c = this.axesRef.current) === null || _c === void 0 ? void 0 : _c.getContext(\"2d\")) !== null && _d !== void 0 ? _d : undefined,\n            mouseCoord: (_f = (_e = this.mouseRef.current) === null || _e === void 0 ? void 0 : _e.getContext(\"2d\")) !== null && _f !== void 0 ? _f : undefined,\n        };\n    }\n    render() {\n        const { height, ratio, style, width } = this.props;\n        const adjustedWidth = width * ratio;\n        const adjustedHeight = height * ratio;\n        const canvasStyle = { position: \"absolute\", width, height };\n        return (React.createElement(\"div\", { style: Object.assign(Object.assign({}, style), { position: \"absolute\" }) },\n            React.createElement(\"canvas\", { ref: this.bgRef, width: adjustedWidth, height: adjustedHeight, style: canvasStyle }),\n            React.createElement(\"canvas\", { ref: this.axesRef, width: adjustedWidth, height: adjustedHeight, style: canvasStyle }),\n            React.createElement(\"canvas\", { ref: this.mouseRef, width: adjustedWidth, height: adjustedHeight, style: canvasStyle })));\n    }\n}\n//# sourceMappingURL=CanvasContainer.js.map","import { max, min } from \"d3-array\";\nimport { getClosestItemIndexes, head, isDefined, isNotDefined, last } from \"../utils\";\nfunction getNewEnd(fallbackEnd, xAccessor, initialXScale, start) {\n    const { lastItem, lastItemX } = fallbackEnd;\n    const lastItemXValue = xAccessor(lastItem);\n    const [rangeStart, rangeEnd] = initialXScale.range();\n    const newEnd = ((rangeEnd - rangeStart) / (lastItemX.valueOf() - rangeStart)) * (lastItemXValue.valueOf() - start.valueOf()) +\n        start.valueOf();\n    return newEnd;\n}\nfunction extentsWrapper(useWholeData, clamp, pointsPerPxThreshold, minPointsPerPxThreshold, flipXScale) {\n    function filterData(data, inputDomain, xAccessor, initialXScale, { currentPlotData, currentDomain, fallbackStart, fallbackEnd, ignoreThresholds = false } = {}) {\n        if (useWholeData) {\n            return { plotData: data, domain: inputDomain };\n        }\n        let left = head(inputDomain);\n        let right = last(inputDomain);\n        let clampedDomain = inputDomain;\n        let filteredData = getFilteredResponse(data, left, right, xAccessor);\n        if (filteredData.length === 1 && fallbackStart !== undefined) {\n            left = fallbackStart;\n            right = getNewEnd(fallbackEnd, xAccessor, initialXScale, left);\n            clampedDomain = [left, right];\n            filteredData = getFilteredResponse(data, left, right, xAccessor);\n        }\n        if (typeof clamp === \"function\") {\n            clampedDomain = clamp(clampedDomain, [xAccessor(head(data)), xAccessor(last(data))]);\n        }\n        else {\n            if (clamp === \"left\" || clamp === \"both\" || clamp === true) {\n                clampedDomain = [max([left, xAccessor(head(data))]), clampedDomain[1]];\n            }\n            if (clamp === \"right\" || clamp === \"both\" || clamp === true) {\n                clampedDomain = [clampedDomain[0], min([right, xAccessor(last(data))])];\n            }\n        }\n        if (clampedDomain !== inputDomain) {\n            filteredData = getFilteredResponse(data, clampedDomain[0], clampedDomain[1], xAccessor);\n        }\n        const realInputDomain = clampedDomain;\n        const xScale = initialXScale.copy().domain(realInputDomain);\n        let width = Math.floor(xScale(xAccessor(last(filteredData))) - xScale(xAccessor(head(filteredData))));\n        // prevent negative width when flipXScale\n        if (flipXScale && width < 0) {\n            width = width * -1;\n        }\n        let plotData;\n        let domain;\n        const chartWidth = last(xScale.range()) - head(xScale.range());\n        if ((ignoreThresholds && filteredData.length > 1) ||\n            canShowTheseManyPeriods(width, filteredData.length, pointsPerPxThreshold, minPointsPerPxThreshold)) {\n            plotData = filteredData;\n            domain = realInputDomain;\n        }\n        else {\n            if (chartWidth > showMaxThreshold(width, pointsPerPxThreshold) && isDefined(fallbackEnd)) {\n                plotData = filteredData;\n                const newEnd = getNewEnd(fallbackEnd, xAccessor, initialXScale, head(realInputDomain));\n                domain = [head(realInputDomain), newEnd];\n            }\n            else {\n                plotData =\n                    currentPlotData !== null && currentPlotData !== void 0 ? currentPlotData : filteredData.slice(filteredData.length - showMax(width, pointsPerPxThreshold));\n                domain = currentDomain !== null && currentDomain !== void 0 ? currentDomain : [xAccessor(head(plotData)), xAccessor(last(plotData))];\n            }\n        }\n        return { plotData, domain };\n    }\n    return { filterData };\n}\nfunction canShowTheseManyPeriods(width, arrayLength, maxThreshold, minThreshold) {\n    const widthAdjustedMinThreshold = showMinThreshold(width, minThreshold);\n    const widthAdjustedMaxTheshold = showMaxThreshold(width, maxThreshold);\n    return arrayLength >= widthAdjustedMinThreshold && arrayLength < widthAdjustedMaxTheshold;\n}\nfunction showMinThreshold(width, threshold) {\n    return Math.max(1, Math.ceil(width * threshold));\n}\nfunction showMaxThreshold(width, threshold) {\n    return Math.floor(width * threshold);\n}\nfunction showMax(width, threshold) {\n    return Math.floor(showMaxThreshold(width, threshold) * 0.97);\n}\nfunction getFilteredResponse(data, left, right, xAccessor) {\n    const newLeftIndex = getClosestItemIndexes(data, left, xAccessor).left;\n    const newRightIndex = getClosestItemIndexes(data, right, xAccessor).right;\n    const filteredData = data.slice(newLeftIndex, newRightIndex + 1);\n    return filteredData;\n}\nexport default function ({ xScale, useWholeData, clamp, pointsPerPxThreshold, minPointsPerPxThreshold, flipXScale, }) {\n    return extentsWrapper(useWholeData || isNotDefined(xScale.invert), clamp, pointsPerPxThreshold, minPointsPerPxThreshold, flipXScale);\n}\n//# sourceMappingURL=evaluator.js.map","import { extent as d3Extent, max, min } from \"d3-array\";\nimport * as React from \"react\";\nimport { clearCanvas, functor, head, identity, isDefined, isNotDefined, last, shallowEqual } from \"./utils\";\nimport { mouseBasedZoomAnchor } from \"./zoom\";\nimport { getChartConfigWithUpdatedYScales, getCurrentCharts, getCurrentItem, getNewChartConfig, } from \"./utils/ChartDataUtil\";\nimport { EventCapture } from \"./EventCapture\";\nimport { CanvasContainer } from \"./CanvasContainer\";\nimport evaluator from \"./utils/evaluator\";\nconst CANDIDATES_FOR_RESET = [\"seriesName\"];\nconst shouldResetChart = (thisProps, nextProps) => {\n    return !CANDIDATES_FOR_RESET.every((key) => {\n        const result = shallowEqual(thisProps[key], nextProps[key]);\n        return result;\n    });\n};\nconst getCursorStyle = () => {\n    const tooltipStyle = `\n\t.react-financial-charts-grabbing-cursor {\n\t\tpointer-events: all;\n\t\tcursor: -moz-grabbing;\n\t\tcursor: -webkit-grabbing;\n\t\tcursor: grabbing;\n\t}\n\t.react-financial-charts-crosshair-cursor {\n\t\tpointer-events: all;\n\t\tcursor: crosshair;\n\t}\n\t.react-financial-charts-tooltip-hover {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\t.react-financial-charts-avoid-interaction {\n\t\tpointer-events: none;\n\t}\n\t.react-financial-charts-enable-interaction {\n\t\tpointer-events: all;\n\t}\n\t.react-financial-charts-tooltip {\n\t\tpointer-events: all;\n\t\tcursor: pointer;\n\t}\n\t.react-financial-charts-default-cursor {\n\t\tcursor: default;\n\t}\n\t.react-financial-charts-move-cursor {\n\t\tcursor: move;\n\t}\n\t.react-financial-charts-pointer-cursor {\n\t\tcursor: pointer;\n\t}\n\t.react-financial-charts-ns-resize-cursor {\n\t\tcursor: ns-resize;\n\t}\n\t.react-financial-charts-ew-resize-cursor {\n\t\tcursor: ew-resize;\n\t}`;\n    return React.createElement(\"style\", { type: \"text/css\" }, tooltipStyle);\n};\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst noop = () => { };\nexport const chartCanvasContextDefaultValue = {\n    amIOnTop: () => false,\n    chartConfigs: [],\n    chartId: 0,\n    ratio: 0,\n    displayXAccessor: () => 0,\n    fullData: [],\n    getMutableState: () => ({}),\n    height: 0,\n    margin: { top: 0, right: 0, bottom: 0, left: 0 },\n    plotData: [],\n    setCursorClass: noop,\n    subscribe: noop,\n    unsubscribe: noop,\n    redraw: noop,\n    width: 0,\n    xAccessor: () => 0,\n    xScale: noop,\n};\nexport const ChartCanvasContext = React.createContext(chartCanvasContextDefaultValue);\nconst getDimensions = (props) => {\n    const { margin, height, width } = props;\n    return {\n        height: height - margin.top - margin.bottom,\n        width: width - margin.left - margin.right,\n    };\n};\nconst getXScaleDirection = (flipXScale) => {\n    return flipXScale ? -1 : 1;\n};\nconst calculateFullData = (props) => {\n    const { data: fullData, plotFull, xScale, clamp, pointsPerPxThreshold, flipXScale, xAccessor, displayXAccessor, minPointsPerPxThreshold, } = props;\n    const useWholeData = plotFull !== undefined ? plotFull : xAccessor === identity;\n    const { filterData } = evaluator({\n        xScale,\n        useWholeData,\n        clamp,\n        pointsPerPxThreshold,\n        minPointsPerPxThreshold,\n        flipXScale,\n    });\n    return {\n        xAccessor,\n        displayXAccessor: displayXAccessor !== null && displayXAccessor !== void 0 ? displayXAccessor : xAccessor,\n        xScale: xScale.copy(),\n        fullData,\n        filterData,\n    };\n};\nconst resetChart = (props) => {\n    const state = calculateState(props);\n    const { xAccessor, displayXAccessor, fullData, plotData: initialPlotData, xScale } = state;\n    const { postCalculator, children } = props;\n    const plotData = postCalculator !== undefined ? postCalculator(initialPlotData) : initialPlotData;\n    const dimensions = getDimensions(props);\n    const chartConfigs = getChartConfigWithUpdatedYScales(getNewChartConfig(dimensions, children), { plotData, xAccessor, displayXAccessor, fullData }, xScale.domain());\n    return Object.assign(Object.assign({}, state), { xScale,\n        plotData,\n        chartConfigs });\n};\nconst updateChart = (newState, initialXScale, props, lastItemWasVisible, initialChartConfig) => {\n    const { fullData, xScale, xAccessor, displayXAccessor, filterData } = newState;\n    const lastItem = last(fullData);\n    const lastXItem = xAccessor(lastItem);\n    const [start, end] = initialXScale.domain();\n    const { postCalculator, children, padding, flipXScale, maintainPointsPerPixelOnResize } = props;\n    const direction = getXScaleDirection(flipXScale);\n    const dimensions = getDimensions(props);\n    const updatedXScale = setXRange(xScale, dimensions, padding, direction);\n    let initialPlotData;\n    if (!lastItemWasVisible || end >= lastXItem) {\n        // resize comes here...\n        // get plotData between [start, end] and do not change the domain\n        const [rangeStart, rangeEnd] = initialXScale.range();\n        const [newRangeStart, newRangeEnd] = updatedXScale.range();\n        const newDomainExtent = ((newRangeEnd - newRangeStart) / (rangeEnd - rangeStart)) * (end.valueOf() - start.valueOf());\n        const newStart = maintainPointsPerPixelOnResize ? end.valueOf() - newDomainExtent : start;\n        const lastItemX = initialXScale(lastXItem);\n        const response = filterData(fullData, [newStart, end], xAccessor, updatedXScale, {\n            fallbackStart: start,\n            fallbackEnd: { lastItem, lastItemX },\n        });\n        initialPlotData = response.plotData;\n        updatedXScale.domain(response.domain);\n    }\n    else if (lastItemWasVisible && end < lastXItem) {\n        // this is when a new item is added and last item was visible\n        // so slide over and show the new item also\n        // get plotData between [xAccessor(l) - (end - start), xAccessor(l)] and DO change the domain\n        const dx = initialXScale(lastXItem) - initialXScale.range()[1];\n        const [newStart, newEnd] = initialXScale\n            .range()\n            .map((x) => x + dx)\n            .map((x) => initialXScale.invert(x));\n        const response = filterData(fullData, [newStart, newEnd], xAccessor, updatedXScale);\n        initialPlotData = response.plotData;\n        updatedXScale.domain(response.domain); // if last item was visible, then shift\n    }\n    const plotData = postCalculator(initialPlotData);\n    const chartConfigs = getChartConfigWithUpdatedYScales(getNewChartConfig(dimensions, children, initialChartConfig), { plotData, xAccessor, displayXAccessor, fullData }, updatedXScale.domain());\n    return {\n        xScale: updatedXScale,\n        xAccessor,\n        chartConfigs,\n        plotData,\n        fullData,\n        filterData,\n    };\n};\nconst calculateState = (props) => {\n    const { xAccessor: inputXAccessor, xExtents: xExtentsProp, data, padding, flipXScale } = props;\n    const direction = getXScaleDirection(flipXScale);\n    const dimensions = getDimensions(props);\n    const extent = typeof xExtentsProp === \"function\"\n        ? xExtentsProp(data)\n        : d3Extent(xExtentsProp.map((d) => functor(d)).map((each) => each(data, inputXAccessor)));\n    const { xAccessor, displayXAccessor, xScale, fullData, filterData } = calculateFullData(props);\n    const updatedXScale = setXRange(xScale, dimensions, padding, direction);\n    const { plotData, domain } = filterData(fullData, extent, inputXAccessor, updatedXScale);\n    return {\n        plotData,\n        xScale: updatedXScale.domain(domain),\n        xAccessor,\n        displayXAccessor,\n        fullData,\n        filterData,\n    };\n};\nconst setXRange = (xScale, dimensions, padding, direction = 1) => {\n    if (xScale.rangeRoundPoints) {\n        if (isNaN(padding)) {\n            throw new Error(\"padding has to be a number for ordinal scale\");\n        }\n        xScale.rangeRoundPoints([0, dimensions.width], padding);\n    }\n    else if (xScale.padding) {\n        if (isNaN(padding)) {\n            throw new Error(\"padding has to be a number for ordinal scale\");\n        }\n        xScale.range([0, dimensions.width]);\n        xScale.padding(padding / 2);\n    }\n    else {\n        const { left, right } = isNaN(padding) ? padding : { left: padding, right: padding };\n        if (direction > 0) {\n            xScale.range([left, dimensions.width - right]);\n        }\n        else {\n            xScale.range([dimensions.width - right, left]);\n        }\n    }\n    return xScale;\n};\nconst pinchCoordinates = (pinch) => {\n    const { touch1Pos, touch2Pos } = pinch;\n    return {\n        topLeft: [Math.min(touch1Pos[0], touch2Pos[0]), Math.min(touch1Pos[1], touch2Pos[1])],\n        bottomRight: [Math.max(touch1Pos[0], touch2Pos[0]), Math.max(touch1Pos[1], touch2Pos[1])],\n    };\n};\nconst isInteractionEnabled = (xScale, xAccessor, data) => {\n    const interaction = !isNaN(xScale(xAccessor(head(data)))) && isDefined(xScale.invert);\n    return interaction;\n};\nexport class ChartCanvas extends React.Component {\n    constructor(props) {\n        super(props);\n        this.canvasContainerRef = React.createRef();\n        this.eventCaptureRef = React.createRef();\n        this.lastSubscriptionId = 0;\n        this.mutableState = { mouseXY: [0, 0], currentCharts: [], currentItem: null };\n        this.panInProgress = false;\n        this.subscriptions = [];\n        this.getMutableState = () => {\n            return this.mutableState;\n        };\n        this.getCanvasContexts = () => {\n            var _a;\n            return (_a = this.canvasContainerRef.current) === null || _a === void 0 ? void 0 : _a.getCanvasContexts();\n        };\n        this.generateSubscriptionId = () => {\n            this.lastSubscriptionId++;\n            return this.lastSubscriptionId;\n        };\n        this.subscribe = (id, rest) => {\n            const { getPanConditions = functor({\n                draggable: false,\n                panEnabled: true,\n            }), } = rest;\n            this.subscriptions = this.subscriptions.concat(Object.assign(Object.assign({ id }, rest), { getPanConditions }));\n        };\n        this.unsubscribe = (id) => {\n            this.subscriptions = this.subscriptions.filter((each) => each.id !== id);\n        };\n        this.getAllPanConditions = () => {\n            return this.subscriptions.map((each) => each.getPanConditions());\n        };\n        this.setCursorClass = (className) => {\n            var _a;\n            (_a = this.eventCaptureRef.current) === null || _a === void 0 ? void 0 : _a.setCursorClass(className);\n        };\n        this.amIOnTop = (id) => {\n            const dragableComponents = this.subscriptions.filter((each) => each.getPanConditions().draggable);\n            return dragableComponents.length > 0 && last(dragableComponents).id === id;\n        };\n        this.handleContextMenu = (mouseXY, e) => {\n            const { xAccessor, chartConfigs, plotData, xScale } = this.state;\n            const currentCharts = getCurrentCharts(chartConfigs, mouseXY);\n            const currentItem = getCurrentItem(xScale, xAccessor, mouseXY, plotData);\n            this.triggerEvent(\"contextmenu\", {\n                mouseXY,\n                currentItem,\n                currentCharts,\n            }, e);\n        };\n        this.calculateStateForDomain = (newDomain) => {\n            const { xAccessor, displayXAccessor, xScale: initialXScale, chartConfigs: initialChartConfig, plotData: initialPlotData, } = this.state;\n            const { filterData, fullData } = this.state;\n            const { postCalculator = ChartCanvas.defaultProps.postCalculator } = this.props;\n            const { plotData: beforePlotData, domain } = filterData(fullData, newDomain, xAccessor, initialXScale, {\n                currentPlotData: initialPlotData,\n                currentDomain: initialXScale.domain(),\n            });\n            const plotData = postCalculator(beforePlotData);\n            const updatedScale = initialXScale.copy().domain(domain);\n            const chartConfigs = getChartConfigWithUpdatedYScales(initialChartConfig, { plotData, xAccessor, displayXAccessor, fullData }, updatedScale.domain());\n            return {\n                xScale: updatedScale,\n                plotData,\n                chartConfigs,\n            };\n        };\n        this.pinchZoomHelper = (initialPinch, finalPinch) => {\n            const { xScale: initialPinchXScale } = initialPinch;\n            const { xScale: initialXScale, chartConfigs: initialChartConfig, plotData: initialPlotData, xAccessor, displayXAccessor, filterData, fullData, } = this.state;\n            const { postCalculator = ChartCanvas.defaultProps.postCalculator } = this.props;\n            const { topLeft: iTL, bottomRight: iBR } = pinchCoordinates(initialPinch);\n            const { topLeft: fTL, bottomRight: fBR } = pinchCoordinates(finalPinch);\n            const e = initialPinchXScale.range()[1];\n            const xDash = Math.round(-(iBR[0] * fTL[0] - iTL[0] * fBR[0]) / (iTL[0] - iBR[0]));\n            const yDash = Math.round(e + ((e - iBR[0]) * (e - fTL[0]) - (e - iTL[0]) * (e - fBR[0])) / (e - iTL[0] - (e - iBR[0])));\n            const x = Math.round((-xDash * iTL[0]) / (-xDash + fTL[0]));\n            const y = Math.round(e - ((yDash - e) * (e - iTL[0])) / (yDash + (e - fTL[0])));\n            const newDomain = [x, y].map(initialPinchXScale.invert);\n            const { plotData: beforePlotData, domain } = filterData(fullData, newDomain, xAccessor, initialPinchXScale, {\n                currentPlotData: initialPlotData,\n                currentDomain: initialXScale.domain(),\n            });\n            const plotData = postCalculator(beforePlotData);\n            const updatedScale = initialXScale.copy().domain(domain);\n            const mouseXY = finalPinch.touch1Pos;\n            const chartConfigs = getChartConfigWithUpdatedYScales(initialChartConfig, { plotData, xAccessor, displayXAccessor, fullData }, updatedScale.domain());\n            const currentItem = getCurrentItem(updatedScale, xAccessor, mouseXY, plotData);\n            return {\n                chartConfigs,\n                xScale: updatedScale,\n                plotData,\n                mouseXY,\n                currentItem,\n                xAccessor,\n                fullData,\n            };\n        };\n        this.handlePinchZoom = (initialPinch, finalPinch, e) => {\n            if (!this.waitingForPinchZoomAnimationFrame) {\n                this.waitingForPinchZoomAnimationFrame = true;\n                const state = this.pinchZoomHelper(initialPinch, finalPinch);\n                this.triggerEvent(\"pinchzoom\", state, e);\n                this.finalPinch = finalPinch;\n                requestAnimationFrame(() => {\n                    this.clearBothCanvas();\n                    this.draw({ trigger: \"pinchzoom\" });\n                    this.waitingForPinchZoomAnimationFrame = false;\n                });\n            }\n        };\n        this.handlePinchZoomEnd = (initialPinch, e) => {\n            const { xAccessor = ChartCanvas.defaultProps.xAccessor } = this.state;\n            if (this.finalPinch) {\n                const state = this.pinchZoomHelper(initialPinch, this.finalPinch);\n                const { xScale, fullData } = state;\n                this.triggerEvent(\"pinchzoom\", state, e);\n                this.finalPinch = undefined;\n                this.clearThreeCanvas();\n                const firstItem = head(fullData);\n                const scale_start = head(xScale.domain());\n                const data_start = xAccessor(firstItem);\n                const lastItem = last(fullData);\n                const scale_end = last(xScale.domain());\n                const data_end = xAccessor(lastItem);\n                const { onLoadAfter, onLoadBefore } = this.props;\n                this.setState(state, () => {\n                    if (scale_start < data_start) {\n                        if (onLoadBefore !== undefined) {\n                            onLoadBefore(scale_start, data_start);\n                        }\n                    }\n                    if (data_end < scale_end) {\n                        if (onLoadAfter !== undefined) {\n                            onLoadAfter(data_end, scale_end);\n                        }\n                    }\n                });\n            }\n        };\n        this.handleZoom = (zoomDirection, mouseXY, e) => {\n            if (this.panInProgress) {\n                return;\n            }\n            const { xAccessor, xScale: initialXScale, plotData: initialPlotData, fullData } = this.state;\n            const { zoomMultiplier = ChartCanvas.defaultProps.zoomMultiplier, zoomAnchor = ChartCanvas.defaultProps.zoomAnchor, } = this.props;\n            const item = zoomAnchor({\n                xScale: initialXScale,\n                xAccessor: xAccessor,\n                mouseXY,\n                plotData: initialPlotData,\n            });\n            const cx = initialXScale(item);\n            const c = zoomDirection > 0 ? 1 * zoomMultiplier : 1 / zoomMultiplier;\n            const newDomain = initialXScale\n                .range()\n                .map((x) => cx + (x - cx) * c)\n                .map((x) => initialXScale.invert(x));\n            const { xScale, plotData, chartConfigs } = this.calculateStateForDomain(newDomain);\n            const currentItem = getCurrentItem(xScale, xAccessor, mouseXY, plotData);\n            const currentCharts = getCurrentCharts(chartConfigs, mouseXY);\n            this.clearThreeCanvas();\n            const firstItem = head(fullData);\n            const scale_start = head(xScale.domain());\n            const data_start = xAccessor(firstItem);\n            const lastItem = last(fullData);\n            const scale_end = last(xScale.domain());\n            const data_end = xAccessor(lastItem);\n            this.mutableState = {\n                mouseXY,\n                currentItem,\n                currentCharts,\n            };\n            this.triggerEvent(\"zoom\", {\n                xScale,\n                plotData,\n                chartConfigs,\n                mouseXY,\n                currentCharts,\n                currentItem,\n                show: true,\n            }, e);\n            const { onLoadAfter, onLoadBefore } = this.props;\n            this.setState({\n                xScale,\n                plotData,\n                chartConfigs,\n            }, () => {\n                if (scale_start < data_start) {\n                    if (onLoadBefore !== undefined) {\n                        onLoadBefore(scale_start, data_start);\n                    }\n                }\n                if (data_end < scale_end) {\n                    if (onLoadAfter !== undefined) {\n                        onLoadAfter(data_end, scale_end);\n                    }\n                }\n            });\n        };\n        this.xAxisZoom = (newDomain) => {\n            const { xScale, plotData, chartConfigs } = this.calculateStateForDomain(newDomain);\n            this.clearThreeCanvas();\n            const { xAccessor, fullData } = this.state;\n            const firstItem = head(fullData);\n            const scale_start = head(xScale.domain());\n            const data_start = xAccessor(firstItem);\n            const lastItem = last(fullData);\n            const scale_end = last(xScale.domain());\n            const data_end = xAccessor(lastItem);\n            const { onLoadAfter, onLoadBefore } = this.props;\n            this.setState({\n                xScale,\n                plotData,\n                chartConfigs,\n            }, () => {\n                if (scale_start < data_start) {\n                    if (onLoadBefore !== undefined) {\n                        onLoadBefore(scale_start, data_start);\n                    }\n                }\n                if (data_end < scale_end) {\n                    if (onLoadAfter !== undefined) {\n                        onLoadAfter(data_end, scale_end);\n                    }\n                }\n            });\n        };\n        this.yAxisZoom = (chartId, newDomain) => {\n            this.clearThreeCanvas();\n            const { chartConfigs: initialChartConfig } = this.state;\n            const chartConfigs = initialChartConfig.map((each) => {\n                if (each.id === chartId) {\n                    const { yScale } = each;\n                    return Object.assign(Object.assign({}, each), { yScale: yScale.copy().domain(newDomain), yPanEnabled: true });\n                }\n                else {\n                    return each;\n                }\n            });\n            this.setState({\n                chartConfigs,\n            });\n        };\n        this.draw = (props) => {\n            this.subscriptions.forEach((each) => {\n                if (isDefined(each.draw)) {\n                    each.draw(props);\n                }\n            });\n        };\n        this.redraw = () => {\n            this.clearThreeCanvas();\n            this.draw({ force: true });\n        };\n        this.panHelper = (mouseXY, initialXScale, { dx, dy }, chartsToPan) => {\n            const { xAccessor, displayXAccessor, chartConfigs: initialChartConfig, filterData, fullData } = this.state;\n            const { postCalculator = ChartCanvas.defaultProps.postCalculator } = this.props;\n            const newDomain = initialXScale\n                .range()\n                .map((x) => x - dx)\n                .map((x) => initialXScale.invert(x));\n            const { plotData: beforePlotData, domain } = filterData(fullData, newDomain, xAccessor, initialXScale, {\n                currentPlotData: this.hackyWayToStopPanBeyondBounds__plotData,\n                currentDomain: this.hackyWayToStopPanBeyondBounds__domain,\n                ignoreThresholds: true,\n            });\n            const updatedScale = initialXScale.copy().domain(domain);\n            const plotData = postCalculator(beforePlotData);\n            const currentItem = getCurrentItem(updatedScale, xAccessor, mouseXY, plotData);\n            const chartConfigs = getChartConfigWithUpdatedYScales(initialChartConfig, { plotData, xAccessor, displayXAccessor, fullData }, updatedScale.domain(), dy, chartsToPan);\n            const currentCharts = getCurrentCharts(chartConfigs, mouseXY);\n            return {\n                xScale: updatedScale,\n                plotData,\n                chartConfigs,\n                mouseXY,\n                currentCharts,\n                currentItem,\n            };\n        };\n        this.handlePan = (mousePosition, panStartXScale, dxdy, chartsToPan, e) => {\n            var _a, _b;\n            if (this.waitingForPanAnimationFrame) {\n                return;\n            }\n            this.waitingForPanAnimationFrame = true;\n            this.hackyWayToStopPanBeyondBounds__plotData =\n                (_a = this.hackyWayToStopPanBeyondBounds__plotData) !== null && _a !== void 0 ? _a : this.state.plotData;\n            this.hackyWayToStopPanBeyondBounds__domain =\n                (_b = this.hackyWayToStopPanBeyondBounds__domain) !== null && _b !== void 0 ? _b : this.state.xScale.domain();\n            const newState = this.panHelper(mousePosition, panStartXScale, dxdy, chartsToPan);\n            this.hackyWayToStopPanBeyondBounds__plotData = newState.plotData;\n            this.hackyWayToStopPanBeyondBounds__domain = newState.xScale.domain();\n            this.panInProgress = true;\n            this.triggerEvent(\"pan\", newState, e);\n            this.mutableState = {\n                mouseXY: newState.mouseXY,\n                currentItem: newState.currentItem,\n                currentCharts: newState.currentCharts,\n            };\n            requestAnimationFrame(() => {\n                this.waitingForPanAnimationFrame = false;\n                this.clearBothCanvas();\n                this.draw({ trigger: \"pan\" });\n            });\n        };\n        this.handlePanEnd = (mousePosition, panStartXScale, dxdy, chartsToPan, e) => {\n            const state = this.panHelper(mousePosition, panStartXScale, dxdy, chartsToPan);\n            this.hackyWayToStopPanBeyondBounds__plotData = null;\n            this.hackyWayToStopPanBeyondBounds__domain = null;\n            this.panInProgress = false;\n            const { xScale, plotData, chartConfigs } = state;\n            this.triggerEvent(\"panend\", state, e);\n            requestAnimationFrame(() => {\n                const { xAccessor, fullData } = this.state;\n                const firstItem = head(fullData);\n                const scale_start = head(xScale.domain());\n                const data_start = xAccessor(firstItem);\n                const lastItem = last(fullData);\n                const scale_end = last(xScale.domain());\n                const data_end = xAccessor(lastItem);\n                const { onLoadAfter, onLoadBefore } = this.props;\n                this.clearThreeCanvas();\n                this.setState({\n                    xScale,\n                    plotData,\n                    chartConfigs,\n                }, () => {\n                    if (scale_start < data_start) {\n                        if (onLoadBefore !== undefined) {\n                            onLoadBefore(scale_start, data_start);\n                        }\n                    }\n                    if (data_end < scale_end) {\n                        if (onLoadAfter !== undefined) {\n                            onLoadAfter(data_end, scale_end);\n                        }\n                    }\n                });\n            });\n        };\n        this.handleMouseDown = (_, __, e) => {\n            this.triggerEvent(\"mousedown\", this.mutableState, e);\n        };\n        this.handleMouseEnter = (e) => {\n            this.triggerEvent(\"mouseenter\", {\n                show: true,\n            }, e);\n        };\n        this.handleMouseMove = (mouseXY, _, e) => {\n            if (this.waitingForMouseMoveAnimationFrame) {\n                return;\n            }\n            this.waitingForMouseMoveAnimationFrame = true;\n            const { chartConfigs, plotData, xScale, xAccessor } = this.state;\n            const currentCharts = getCurrentCharts(chartConfigs, mouseXY);\n            const currentItem = getCurrentItem(xScale, xAccessor, mouseXY, plotData);\n            this.triggerEvent(\"mousemove\", {\n                show: true,\n                mouseXY,\n                // prevMouseXY is used in interactive components\n                prevMouseXY: this.prevMouseXY,\n                currentItem,\n                currentCharts,\n            }, e);\n            this.prevMouseXY = mouseXY;\n            this.mutableState = {\n                mouseXY,\n                currentItem,\n                currentCharts,\n            };\n            requestAnimationFrame(() => {\n                this.clearMouseCanvas();\n                this.draw({ trigger: \"mousemove\" });\n                this.waitingForMouseMoveAnimationFrame = false;\n            });\n        };\n        this.handleMouseLeave = (e) => {\n            this.triggerEvent(\"mouseleave\", { show: false }, e);\n            this.clearMouseCanvas();\n            this.draw({ trigger: \"mouseleave\" });\n        };\n        this.handleDragStart = ({ startPos }, e) => {\n            this.triggerEvent(\"dragstart\", { startPos }, e);\n        };\n        this.handleDrag = ({ startPos, mouseXY }, e) => {\n            const { chartConfigs, plotData, xScale, xAccessor } = this.state;\n            const currentCharts = getCurrentCharts(chartConfigs, mouseXY);\n            const currentItem = getCurrentItem(xScale, xAccessor, mouseXY, plotData);\n            this.triggerEvent(\"drag\", {\n                startPos,\n                mouseXY,\n                currentItem,\n                currentCharts,\n            }, e);\n            this.mutableState = {\n                mouseXY,\n                currentItem,\n                currentCharts,\n            };\n            requestAnimationFrame(() => {\n                this.clearMouseCanvas();\n                this.draw({ trigger: \"drag\" });\n            });\n        };\n        this.handleDragEnd = ({ mouseXY }, e) => {\n            this.triggerEvent(\"dragend\", { mouseXY }, e);\n            requestAnimationFrame(() => {\n                this.clearMouseCanvas();\n                this.draw({ trigger: \"dragend\" });\n            });\n        };\n        this.handleClick = (_, e) => {\n            this.triggerEvent(\"click\", this.mutableState, e);\n            requestAnimationFrame(() => {\n                this.clearMouseCanvas();\n                this.draw({ trigger: \"click\" });\n            });\n        };\n        this.handleDoubleClick = (_, e) => {\n            this.triggerEvent(\"dblclick\", {}, e);\n        };\n        this.resetYDomain = (chartId) => {\n            const { chartConfigs } = this.state;\n            let changed = false;\n            const newChartConfig = chartConfigs.map((each) => {\n                if ((isNotDefined(chartId) || each.id === chartId) &&\n                    !shallowEqual(each.yScale.domain(), each.realYDomain)) {\n                    changed = true;\n                    return Object.assign(Object.assign({}, each), { yScale: each.yScale.domain(each.realYDomain), yPanEnabled: false });\n                }\n                return each;\n            });\n            if (changed) {\n                this.clearThreeCanvas();\n                this.setState({\n                    chartConfigs: newChartConfig,\n                });\n            }\n        };\n        this.state = resetChart(props);\n    }\n    static getDerivedStateFromProps(props, state) {\n        var _a;\n        const { chartConfigs: initialChartConfig, plotData, xAccessor, xScale } = state;\n        const interaction = isInteractionEnabled(xScale, xAccessor, plotData);\n        const shouldReset = shouldResetChart(state.lastProps || {}, props);\n        let newState;\n        if (!interaction || shouldReset || !shallowEqual((_a = state.lastProps) === null || _a === void 0 ? void 0 : _a.xExtents, props.xExtents)) {\n            // do reset\n            newState = resetChart(props);\n        }\n        else {\n            const [start, end] = xScale.domain();\n            const prevLastItem = last(state.fullData);\n            const calculatedState = calculateFullData(props);\n            const { xAccessor } = calculatedState;\n            const previousX = xAccessor(prevLastItem);\n            const lastItemWasVisible = previousX <= end && previousX >= start;\n            newState = updateChart(calculatedState, xScale, props, lastItemWasVisible, initialChartConfig);\n        }\n        return Object.assign(Object.assign({}, newState), { lastProps: props, propIteration: (state.propIteration || 0) + 1 });\n    }\n    getSnapshotBeforeUpdate(prevProps, prevState) {\n        // propIteration is incremented when the props change to differentiate between state updates\n        // and prop updates\n        if (prevState.propIteration !== this.state.propIteration && !this.panInProgress) {\n            this.clearThreeCanvas();\n        }\n        return null;\n    }\n    componentDidUpdate(prevProps) {\n        if (prevProps.data !== this.props.data) {\n            this.triggerEvent(\"dataupdated\", {\n                chartConfigs: this.state.chartConfigs,\n                xScale: this.state.xScale,\n                plotData: this.state.plotData,\n            });\n        }\n    }\n    clearBothCanvas() {\n        const canvases = this.getCanvasContexts();\n        if (canvases && canvases.axes && canvases.mouseCoord) {\n            clearCanvas([canvases.axes, canvases.mouseCoord], this.props.ratio);\n        }\n    }\n    clearMouseCanvas() {\n        const canvases = this.getCanvasContexts();\n        if (canvases && canvases.mouseCoord) {\n            clearCanvas([canvases.mouseCoord], this.props.ratio);\n        }\n    }\n    clearThreeCanvas() {\n        const canvases = this.getCanvasContexts();\n        if (canvases && canvases.axes && canvases.mouseCoord && canvases.bg) {\n            clearCanvas([canvases.axes, canvases.mouseCoord, canvases.bg], this.props.ratio);\n        }\n    }\n    cancelDrag() {\n        var _a;\n        (_a = this.eventCaptureRef.current) === null || _a === void 0 ? void 0 : _a.cancelDrag();\n        this.triggerEvent(\"dragcancel\");\n    }\n    triggerEvent(type, props, e) {\n        this.subscriptions.forEach((each) => {\n            const state = Object.assign(Object.assign({}, this.state), { subscriptions: this.subscriptions });\n            each.listener(type, props, state, e);\n        });\n    }\n    // TODO: Memoize this\n    getContextValues() {\n        const dimensions = getDimensions(this.props);\n        return {\n            chartId: -1,\n            fullData: this.state.fullData,\n            plotData: this.state.plotData,\n            width: dimensions.width,\n            height: dimensions.height,\n            chartConfigs: this.state.chartConfigs,\n            xScale: this.state.xScale,\n            xAccessor: this.state.xAccessor,\n            displayXAccessor: this.state.displayXAccessor,\n            margin: this.props.margin,\n            ratio: this.props.ratio,\n            xAxisZoom: this.xAxisZoom,\n            yAxisZoom: this.yAxisZoom,\n            getCanvasContexts: this.getCanvasContexts,\n            redraw: this.redraw,\n            subscribe: this.subscribe,\n            unsubscribe: this.unsubscribe,\n            generateSubscriptionId: this.generateSubscriptionId,\n            getMutableState: this.getMutableState,\n            amIOnTop: this.amIOnTop,\n            setCursorClass: this.setCursorClass,\n        };\n    }\n    shouldComponentUpdate() {\n        return !this.panInProgress;\n    }\n    render() {\n        const { disableInteraction, disablePan, disableZoom, useCrossHairStyleCursor, onClick, onDoubleClick, height, width, margin = ChartCanvas.defaultProps.margin, className, zIndex = ChartCanvas.defaultProps.zIndex, defaultFocus, ratio, mouseMoveEvent, } = this.props;\n        const { plotData, xScale, xAccessor, chartConfigs } = this.state;\n        const dimensions = getDimensions(this.props);\n        const interaction = isInteractionEnabled(xScale, xAccessor, plotData);\n        const cursorStyle = useCrossHairStyleCursor && interaction;\n        const cursor = getCursorStyle();\n        return (React.createElement(ChartCanvasContext.Provider, { value: this.getContextValues() },\n            React.createElement(\"div\", { style: { position: \"relative\", width, height }, className: className, onClick: onClick, onDoubleClick: onDoubleClick },\n                React.createElement(CanvasContainer, { ref: this.canvasContainerRef, ratio: ratio, width: width, height: height, style: { height, zIndex, width } }),\n                React.createElement(\"svg\", { className: className, width: width, height: height, style: { position: \"absolute\", zIndex: zIndex + 5 } },\n                    cursor,\n                    React.createElement(\"defs\", null,\n                        React.createElement(\"clipPath\", { id: \"chart-area-clip\" },\n                            React.createElement(\"rect\", { x: \"0\", y: \"0\", width: dimensions.width, height: dimensions.height })),\n                        chartConfigs.map((each, idx) => (React.createElement(\"clipPath\", { key: idx, id: `chart-area-clip-${each.id}` },\n                            React.createElement(\"rect\", { x: \"0\", y: \"0\", width: each.width, height: each.height }))))),\n                    React.createElement(\"g\", { transform: `translate(${margin.left + 0.5}, ${margin.top + 0.5})` },\n                        React.createElement(EventCapture, { ref: this.eventCaptureRef, useCrossHairStyleCursor: cursorStyle, mouseMove: mouseMoveEvent && interaction, zoom: !disableZoom && interaction, pan: !disablePan && interaction, width: dimensions.width, height: dimensions.height, chartConfig: chartConfigs, xScale: xScale, xAccessor: xAccessor, focus: defaultFocus, disableInteraction: disableInteraction, getAllPanConditions: this.getAllPanConditions, onContextMenu: this.handleContextMenu, onClick: this.handleClick, onDoubleClick: this.handleDoubleClick, onMouseDown: this.handleMouseDown, onMouseMove: this.handleMouseMove, onMouseEnter: this.handleMouseEnter, onMouseLeave: this.handleMouseLeave, onDragStart: this.handleDragStart, onDrag: this.handleDrag, onDragComplete: this.handleDragEnd, onZoom: this.handleZoom, onPinchZoom: this.handlePinchZoom, onPinchZoomEnd: this.handlePinchZoomEnd, onPan: this.handlePan, onPanEnd: this.handlePanEnd }),\n                        React.createElement(\"g\", { className: \"react-financial-charts-avoid-interaction\" }, this.props.children))))));\n    }\n}\nChartCanvas.defaultProps = {\n    clamp: false,\n    className: \"react-financial-charts\",\n    defaultFocus: true,\n    disablePan: false,\n    disableInteraction: false,\n    disableZoom: false,\n    flipXScale: false,\n    maintainPointsPerPixelOnResize: true,\n    margin: { top: 0, right: 40, bottom: 40, left: 0 },\n    minPointsPerPxThreshold: 1 / 100,\n    mouseMoveEvent: true,\n    postCalculator: identity,\n    padding: 0,\n    pointsPerPxThreshold: 2,\n    useCrossHairStyleCursor: true,\n    xAccessor: identity,\n    xExtents: [min, max],\n    zIndex: 1,\n    zoomAnchor: mouseBasedZoomAnchor,\n    zoomMultiplier: 1.1,\n};\n//# sourceMappingURL=ChartCanvas.js.map","import { getCurrentItem } from \"../utils/ChartDataUtil\";\nimport { last } from \"../utils/index\";\nexport const mouseBasedZoomAnchor = (options) => {\n    const { xScale, xAccessor, mouseXY, plotData } = options;\n    const currentItem = getCurrentItem(xScale, xAccessor, mouseXY, plotData);\n    return xAccessor(currentItem);\n};\nexport const lastVisibleItemBasedZoomAnchor = (options) => {\n    const { xAccessor, plotData } = options;\n    const lastItem = last(plotData);\n    return xAccessor(lastItem);\n};\nexport const rightDomainBasedZoomAnchor = (options) => {\n    const { xScale } = options;\n    const [, end] = xScale.domain();\n    return end;\n};\n//# sourceMappingURL=zoomBehavior.js.map","import * as React from \"react\";\nimport { ChartCanvasContext, chartCanvasContextDefaultValue } from \"./ChartCanvas\";\nexport const ChartContext = React.createContext(Object.assign(Object.assign({}, chartCanvasContextDefaultValue), { \n    // @ts-ignore\n    chartConfig: {}, chartId: 0 }));\nexport const Chart = React.memo((props) => {\n    const { \n    // flipYScale = false,\n    id = 0, \n    // origin = [0, 0],\n    // padding = 0,\n    // yPan = true,\n    // yPanEnabled = false,\n    // yScale = scaleLinear(),\n    onContextMenu, onDoubleClick, } = props;\n    const chartCanvasContextValue = React.useContext(ChartCanvasContext);\n    const { subscribe, unsubscribe, chartConfigs } = chartCanvasContextValue;\n    const listener = React.useCallback((type, moreProps, _, e) => {\n        switch (type) {\n            case \"contextmenu\": {\n                if (onContextMenu === undefined) {\n                    return;\n                }\n                const { currentCharts } = moreProps;\n                if (currentCharts.indexOf(id) > -1) {\n                    onContextMenu(e, moreProps);\n                }\n                break;\n            }\n            case \"dblclick\": {\n                if (onDoubleClick === undefined) {\n                    return;\n                }\n                const { currentCharts } = moreProps;\n                if (currentCharts.indexOf(id) > -1) {\n                    onDoubleClick(e, moreProps);\n                }\n                break;\n            }\n        }\n    }, [onContextMenu, onDoubleClick, id]);\n    React.useEffect(() => {\n        subscribe(`chart_${id}`, {\n            listener,\n        });\n        return () => unsubscribe(`chart_${id}`);\n    }, [subscribe, unsubscribe, id, listener]);\n    const config = chartConfigs.find(({ id }) => id === props.id);\n    const contextValue = React.useMemo(() => {\n        return Object.assign(Object.assign({}, chartCanvasContextValue), { chartId: id, chartConfig: config });\n    }, [id, config, chartCanvasContextValue]);\n    const { origin: [x, y], } = config;\n    return (React.createElement(ChartContext.Provider, { value: contextValue },\n        React.createElement(\"g\", { transform: `translate(${x}, ${y})`, id: `chart_${id}` }, props.children)));\n});\nChart.displayName = \"Chart\";\n//# sourceMappingURL=Chart.js.map","/* eslint-disable @typescript-eslint/no-unused-vars */\nimport * as React from \"react\";\nimport { functor, identity } from \"./utils\";\nimport { ChartCanvasContext } from \"./ChartCanvas\";\nconst aliases = {\n    mouseleave: \"mousemove\",\n    panend: \"pan\",\n    pinchzoom: \"pan\",\n    mousedown: \"mousemove\",\n    click: \"mousemove\",\n    contextmenu: \"mousemove\",\n    dblclick: \"mousemove\",\n    dragstart: \"drag\",\n    dragend: \"drag\",\n    dragcancel: \"drag\",\n    zoom: \"zoom\",\n};\nexport class GenericComponent extends React.Component {\n    constructor(props, context) {\n        super(props, context);\n        this.moreProps = {};\n        this.dragInProgress = false;\n        this.evaluationInProgress = false;\n        this.iSetTheCursorClass = false;\n        this.listener = (type, moreProps, state, e) => {\n            if (moreProps !== undefined) {\n                this.updateMoreProps(moreProps);\n            }\n            this.evaluationInProgress = true;\n            this.evaluateType(type, e);\n            this.evaluationInProgress = false;\n        };\n        this.drawOnCanvas = this.drawOnCanvas.bind(this);\n        this.getMoreProps = this.getMoreProps.bind(this);\n        this.draw = this.draw.bind(this);\n        this.updateMoreProps = this.updateMoreProps.bind(this);\n        this.evaluateType = this.evaluateType.bind(this);\n        this.isHover = this.isHover.bind(this);\n        this.preCanvasDraw = this.preCanvasDraw.bind(this);\n        this.postCanvasDraw = this.postCanvasDraw.bind(this);\n        this.getPanConditions = this.getPanConditions.bind(this);\n        this.shouldTypeProceed = this.shouldTypeProceed.bind(this);\n        this.preEvaluate = this.preEvaluate.bind(this);\n        const { generateSubscriptionId } = context;\n        this.subscriberId = generateSubscriptionId();\n        this.state = {\n            updateCount: 0,\n        };\n    }\n    updateMoreProps(moreProps) {\n        Object.keys(moreProps).forEach((key) => {\n            this.moreProps[key] = moreProps[key];\n        });\n    }\n    shouldTypeProceed(type, moreProps) {\n        return true;\n    }\n    preEvaluate(type, moreProps, e) {\n        /// empty\n    }\n    evaluateType(type, e) {\n        // @ts-ignore\n        const newType = aliases[type] || type;\n        const proceed = this.props.drawOn.indexOf(newType) > -1;\n        if (!proceed) {\n            return;\n        }\n        this.preEvaluate(type, this.moreProps, e);\n        if (!this.shouldTypeProceed(type, this.moreProps)) {\n            return;\n        }\n        switch (type) {\n            case \"zoom\":\n            case \"mouseenter\":\n                // DO NOT DRAW FOR THESE EVENTS\n                break;\n            case \"mouseleave\": {\n                this.moreProps.hovering = false;\n                if (this.props.onUnHover) {\n                    this.props.onUnHover(e, this.getMoreProps());\n                }\n                break;\n            }\n            case \"contextmenu\": {\n                if (this.props.onContextMenu) {\n                    this.props.onContextMenu(e, this.getMoreProps());\n                }\n                if (this.moreProps.hovering && this.props.onContextMenuWhenHover) {\n                    this.props.onContextMenuWhenHover(e, this.getMoreProps());\n                }\n                break;\n            }\n            case \"mousedown\": {\n                if (this.props.onMouseDown) {\n                    this.props.onMouseDown(e, this.getMoreProps());\n                }\n                break;\n            }\n            case \"click\": {\n                const { onClick, onClickOutside, onClickWhenHover } = this.props;\n                const moreProps = this.getMoreProps();\n                if (moreProps.hovering && onClickWhenHover !== undefined) {\n                    onClickWhenHover(e, moreProps);\n                }\n                else if (onClickOutside !== undefined) {\n                    onClickOutside(e, moreProps);\n                }\n                if (onClick !== undefined) {\n                    onClick(e, moreProps);\n                }\n                break;\n            }\n            case \"mousemove\": {\n                const prevHover = this.moreProps.hovering;\n                this.moreProps.hovering = this.isHover(e);\n                const { amIOnTop, setCursorClass } = this.context;\n                if (this.moreProps.hovering &&\n                    !this.props.selected &&\n                    /* && !prevHover */\n                    amIOnTop(this.subscriberId) &&\n                    this.props.onHover !== undefined) {\n                    setCursorClass(\"react-financial-charts-pointer-cursor\");\n                    this.iSetTheCursorClass = true;\n                }\n                else if (this.moreProps.hovering && this.props.selected && amIOnTop(this.subscriberId)) {\n                    setCursorClass(this.props.interactiveCursorClass);\n                    this.iSetTheCursorClass = true;\n                }\n                else if (prevHover && !this.moreProps.hovering && this.iSetTheCursorClass) {\n                    this.iSetTheCursorClass = false;\n                    setCursorClass(null);\n                }\n                const moreProps = this.getMoreProps();\n                if (this.moreProps.hovering && !prevHover) {\n                    if (this.props.onHover) {\n                        this.props.onHover(e, moreProps);\n                    }\n                }\n                if (prevHover && !this.moreProps.hovering) {\n                    if (this.props.onUnHover) {\n                        this.props.onUnHover(e, moreProps);\n                    }\n                }\n                if (this.props.onMouseMove) {\n                    this.props.onMouseMove(e, moreProps);\n                }\n                break;\n            }\n            case \"dblclick\": {\n                const moreProps = this.getMoreProps();\n                if (this.props.onDoubleClick) {\n                    this.props.onDoubleClick(e, moreProps);\n                }\n                if (this.moreProps.hovering && this.props.onDoubleClickWhenHover) {\n                    this.props.onDoubleClickWhenHover(e, moreProps);\n                }\n                break;\n            }\n            case \"pan\": {\n                this.moreProps.hovering = false;\n                if (this.props.onPan) {\n                    this.props.onPan(e, this.getMoreProps());\n                }\n                break;\n            }\n            case \"panend\": {\n                if (this.props.onPanEnd) {\n                    this.props.onPanEnd(e, this.getMoreProps());\n                }\n                break;\n            }\n            case \"dragstart\": {\n                if (this.getPanConditions().draggable) {\n                    const { amIOnTop } = this.context;\n                    if (amIOnTop(this.subscriberId)) {\n                        this.dragInProgress = true;\n                        if (this.props.onDragStart !== undefined) {\n                            this.props.onDragStart(e, this.getMoreProps());\n                        }\n                    }\n                }\n                break;\n            }\n            case \"drag\": {\n                if (this.dragInProgress && this.props.onDrag) {\n                    this.props.onDrag(e, this.getMoreProps());\n                }\n                break;\n            }\n            case \"dragend\": {\n                if (this.dragInProgress && this.props.onDragComplete) {\n                    this.props.onDragComplete(e, this.getMoreProps());\n                }\n                this.dragInProgress = false;\n                break;\n            }\n            case \"dragcancel\": {\n                if (this.dragInProgress || this.iSetTheCursorClass) {\n                    const { setCursorClass } = this.context;\n                    setCursorClass(null);\n                }\n                break;\n            }\n        }\n    }\n    isHover(e) {\n        const { isHover } = this.props;\n        if (isHover === undefined) {\n            return false;\n        }\n        return isHover(this.getMoreProps(), e);\n    }\n    getPanConditions() {\n        const draggable = !!(this.props.selected && this.moreProps.hovering) ||\n            (this.props.enableDragOnHover && this.moreProps.hovering);\n        return {\n            draggable,\n            panEnabled: !this.props.disablePan,\n        };\n    }\n    draw({ trigger, force = false }) {\n        const type = aliases[trigger] || trigger;\n        const proceed = this.props.drawOn.indexOf(type) > -1;\n        if (proceed || this.props.selected /* this is to draw as soon as you select */ || force) {\n            const { canvasDraw } = this.props;\n            if (canvasDraw === undefined) {\n                const { updateCount } = this.state;\n                this.setState({\n                    updateCount: updateCount + 1,\n                });\n            }\n            else {\n                this.drawOnCanvas();\n            }\n        }\n    }\n    UNSAFE_componentWillMount() {\n        const { subscribe, chartId } = this.context;\n        const { clip, edgeClip } = this.props;\n        subscribe(this.subscriberId, {\n            chartId,\n            clip,\n            edgeClip,\n            listener: this.listener,\n            draw: this.draw,\n            getPanConditions: this.getPanConditions,\n        });\n        this.UNSAFE_componentWillReceiveProps(this.props, this.context);\n    }\n    componentWillUnmount() {\n        const { unsubscribe } = this.context;\n        unsubscribe(this.subscriberId);\n        if (this.iSetTheCursorClass) {\n            const { setCursorClass } = this.context;\n            setCursorClass(null);\n        }\n    }\n    componentDidMount() {\n        this.componentDidUpdate(this.props);\n    }\n    componentDidUpdate(prevProps) {\n        const { canvasDraw, selected, interactiveCursorClass } = this.props;\n        if (prevProps.selected !== selected) {\n            const { setCursorClass } = this.context;\n            if (selected && this.moreProps.hovering) {\n                this.iSetTheCursorClass = true;\n                setCursorClass(interactiveCursorClass);\n            }\n            else {\n                this.iSetTheCursorClass = false;\n                setCursorClass(null);\n            }\n        }\n        if (canvasDraw !== undefined && !this.evaluationInProgress) {\n            this.updateMoreProps(this.moreProps);\n            this.drawOnCanvas();\n        }\n    }\n    UNSAFE_componentWillReceiveProps(nextProps, nextContext) {\n        const { xScale, plotData, chartConfig, getMutableState } = nextContext;\n        this.moreProps = Object.assign(Object.assign(Object.assign({}, this.moreProps), getMutableState()), { \n            /*\n            ^ this is so\n            mouseXY, currentCharts, currentItem are available to\n            newly created components like MouseHoverText which\n            is created right after a new interactive object is drawn\n            */\n            xScale,\n            plotData,\n            chartConfig });\n    }\n    getMoreProps() {\n        const { xScale, plotData, chartConfigs, morePropsDecorator, xAccessor, displayXAccessor, width, height } = this.context;\n        const { chartId, fullData } = this.context;\n        const moreProps = Object.assign({ xScale,\n            plotData,\n            chartConfigs,\n            xAccessor,\n            displayXAccessor,\n            width,\n            height,\n            chartId,\n            fullData }, this.moreProps);\n        return (morePropsDecorator || identity)(moreProps);\n    }\n    preCanvasDraw(ctx, moreProps) {\n        // do nothing\n    }\n    postCanvasDraw(ctx, moreProps) {\n        // empty\n    }\n    drawOnCanvas() {\n        const { canvasDraw, canvasToDraw } = this.props;\n        if (canvasDraw === undefined || canvasToDraw === undefined) {\n            return;\n        }\n        const { getCanvasContexts } = this.context;\n        const moreProps = this.getMoreProps();\n        const contexts = getCanvasContexts();\n        const ctx = canvasToDraw(contexts);\n        if (ctx !== undefined) {\n            this.preCanvasDraw(ctx, moreProps);\n            canvasDraw(ctx, moreProps);\n            this.postCanvasDraw(ctx, moreProps);\n        }\n    }\n    render() {\n        const { canvasDraw, clip, svgDraw } = this.props;\n        if (canvasDraw !== undefined || svgDraw === undefined) {\n            return null;\n        }\n        const { chartId } = this.context;\n        const suffix = chartId !== undefined ? \"-\" + chartId : \"\";\n        const style = clip ? { clipPath: `url(#chart-area-clip${suffix})` } : undefined;\n        return React.createElement(\"g\", { style: style }, svgDraw(this.getMoreProps()));\n    }\n}\nGenericComponent.defaultProps = {\n    svgDraw: functor(null),\n    draw: [],\n    canvasToDraw: (contexts) => contexts.mouseCoord,\n    clip: true,\n    edgeClip: false,\n    selected: false,\n    disablePan: false,\n    enableDragOnHover: false,\n};\nGenericComponent.contextType = ChartCanvasContext;\nexport const getAxisCanvas = (contexts) => {\n    return contexts.axes;\n};\nexport const getMouseCanvas = (contexts) => {\n    return contexts.mouseCoord;\n};\n//# sourceMappingURL=GenericComponent.js.map","import { GenericComponent } from \"./GenericComponent\";\nimport { isDefined } from \"./utils\";\nimport { ChartContext } from \"./Chart\";\nconst ALWAYS_TRUE_TYPES = [\"drag\", \"dragend\"];\nexport class GenericChartComponent extends GenericComponent {\n    constructor(props, context) {\n        super(props, context);\n        this.preCanvasDraw = this.preCanvasDraw.bind(this);\n        this.postCanvasDraw = this.postCanvasDraw.bind(this);\n        this.shouldTypeProceed = this.shouldTypeProceed.bind(this);\n        this.preEvaluate = this.preEvaluate.bind(this);\n        this.updateMoreProps = this.updateMoreProps.bind(this);\n    }\n    preCanvasDraw(ctx, moreProps) {\n        super.preCanvasDraw(ctx, moreProps);\n        ctx.save();\n        const { margin, ratio } = this.context;\n        const { chartConfig: { width, height, origin }, } = moreProps;\n        const canvasOriginX = 0.5 * ratio + origin[0] + margin.left;\n        const canvasOriginY = 0.5 * ratio + origin[1] + margin.top;\n        const { clip, edgeClip } = this.props;\n        ctx.setTransform(1, 0, 0, 1, 0, 0);\n        ctx.scale(ratio, ratio);\n        if (edgeClip) {\n            ctx.beginPath();\n            ctx.rect(-1, canvasOriginY - 10, width + margin.left + margin.right + 1, height + 20);\n            ctx.clip();\n        }\n        ctx.translate(canvasOriginX, canvasOriginY);\n        if (clip) {\n            ctx.beginPath();\n            ctx.rect(-1, -1, width + 1, height + 1);\n            ctx.clip();\n        }\n    }\n    postCanvasDraw(ctx, moreProps) {\n        super.postCanvasDraw(ctx, moreProps);\n        ctx.restore();\n    }\n    updateMoreProps(moreProps) {\n        super.updateMoreProps(moreProps);\n        const { chartConfig: chartConfigList } = moreProps;\n        if (chartConfigList && Array.isArray(chartConfigList)) {\n            const { chartId } = this.context;\n            const chartConfig = chartConfigList.find((each) => each.id === chartId);\n            this.moreProps.chartConfig = chartConfig;\n        }\n        if (isDefined(this.moreProps.chartConfig)) {\n            const { origin: [ox, oy], } = this.moreProps.chartConfig;\n            if (isDefined(moreProps.mouseXY)) {\n                const { mouseXY: [x, y], } = moreProps;\n                this.moreProps.mouseXY = [x - ox, y - oy];\n            }\n            if (isDefined(moreProps.startPos)) {\n                const { startPos: [x, y], } = moreProps;\n                this.moreProps.startPos = [x - ox, y - oy];\n            }\n        }\n    }\n    preEvaluate( /* type, moreProps */) {\n        ///\n    }\n    shouldTypeProceed(type, moreProps) {\n        if ((type === \"mousemove\" || type === \"click\") && this.props.disablePan) {\n            return true;\n        }\n        if (ALWAYS_TRUE_TYPES.indexOf(type) === -1 && isDefined(moreProps) && isDefined(moreProps.currentCharts)) {\n            return moreProps.currentCharts.indexOf(this.context.chartId) > -1;\n        }\n        return true;\n    }\n}\nGenericChartComponent.defaultProps = GenericComponent.defaultProps;\nGenericChartComponent.contextType = ChartContext;\n//# sourceMappingURL=GenericChartComponent.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from \"react\";\nexport class ToolTipText extends React.PureComponent {\n    render() {\n        const _a = this.props, { children } = _a, rest = __rest(_a, [\"children\"]);\n        return React.createElement(\"text\", Object.assign({}, rest), children);\n    }\n}\nToolTipText.defaultProps = {\n    className: \"react-financial-charts-tooltip\",\n    fontFamily: \"-apple-system, system-ui, 'Helvetica Neue', Ubuntu, sans-serif\",\n    fontSize: 11,\n};\n//# sourceMappingURL=ToolTipText.js.map","var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport * as React from \"react\";\nexport class ToolTipTSpanLabel extends React.PureComponent {\n    render() {\n        const _a = this.props, { children } = _a, rest = __rest(_a, [\"children\"]);\n        return React.createElement(\"tspan\", Object.assign({}, rest), children);\n    }\n}\nToolTipTSpanLabel.defaultProps = {\n    className: \"react-financial-charts-tooltip-label\",\n    fill: \"#4682B4\",\n};\n//# sourceMappingURL=ToolTipTSpanLabel.js.map","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { format } from \"d3-format\";\nimport {\n  functor,\n  GenericChartComponent,\n  last\n} from \"@react-financial-charts/core\";\nimport {\n  ToolTipText,\n  ToolTipTSpanLabel\n} from \"@react-financial-charts/tooltip\";\n\nconst displayTextsDefault = {\n  o: \"O: \",\n  h: \" H: \",\n  l: \" L: \",\n  c: \" C: \",\n  na: \" n/a \",\n  v: \" \\xa0 Vol: \"\n};\n\nclass OHLCTooltip extends Component {\n  constructor() {\n    super(...arguments);\n    this.renderSVG = this.renderSVG.bind(this);\n  }\n\n  renderSVG(moreProps) {\n    const {\n      accessor,\n      changeFormat,\n      className,\n      displayTexts,\n      displayValuesFor,\n      fontFamily,\n      fontSize,\n      fontWeight,\n      labelFill,\n      labelFontWeight,\n      ohlcFormat,\n      onClick,\n      origin: originProp,\n      percentFormat,\n      textFill,\n      volumeFormat\n    } = this.props;\n\n    const {\n      chartConfig: { width, height },\n      fullData\n    } = moreProps;\n\n    const _a = displayValuesFor(this.props, moreProps);\n    const currentItem = _a !== null && _a !== void 0 ? _a : last(fullData);\n\n    let open = displayTexts.na;\n    let high = displayTexts.na;\n    let low = displayTexts.na;\n    let close = displayTexts.na;\n    let change = displayTexts.na;\n    let volume = displayTexts.na;\n\n    if (currentItem !== undefined && accessor !== undefined) {\n      const item = accessor(currentItem);\n      if (item !== undefined) {\n        open = ohlcFormat(item.open);\n        high = ohlcFormat(item.high);\n        low = ohlcFormat(item.low);\n        close = ohlcFormat(item.close);\n        change = `${changeFormat(item.close - item.open)} (${percentFormat(\n          (item.close - item.open) / item.open\n        )})`;\n        volume = volumeFormat(item.volume);\n      }\n    }\n\n    const [x, y] = functor(originProp)(width, height);\n    const valueFill = functor(textFill)(currentItem);\n\n    return (\n      <g\n        className={className}\n        transform={`translate(${x}, ${y})`}\n        onClick={onClick}\n      >\n        <ToolTipText\n          x={0}\n          y={0}\n          fontFamily={fontFamily}\n          fontSize={fontSize}\n          fontWeight={fontWeight}\n        >\n          <ToolTipTSpanLabel\n            fill={labelFill}\n            fontWeight={labelFontWeight}\n            key=\"label_O\"\n          >\n            {displayTexts.o}\n          </ToolTipTSpanLabel>\n          <tspan key=\"value_O\" fill={valueFill}>\n            {open}\n          </tspan>\n          <ToolTipTSpanLabel\n            fill={labelFill}\n            fontWeight={labelFontWeight}\n            key=\"label_H\"\n          >\n            {displayTexts.h}\n          </ToolTipTSpanLabel>\n          <tspan key=\"value_H\" fill={valueFill}>\n            {high}\n          </tspan>\n          <ToolTipTSpanLabel\n            fill={labelFill}\n            fontWeight={labelFontWeight}\n            key=\"label_L\"\n          >\n            {displayTexts.l}\n          </ToolTipTSpanLabel>\n          <tspan key=\"value_L\" fill={valueFill}>\n            {low}\n          </tspan>\n          <ToolTipTSpanLabel\n            fill={labelFill}\n            fontWeight={labelFontWeight}\n            key=\"label_C\"\n          >\n            {displayTexts.c}\n          </ToolTipTSpanLabel>\n          <tspan key=\"value_C\" fill={valueFill}>\n            {close}\n          </tspan>\n          <tspan key=\"value_Change\" fill={valueFill}>\n            {` ${change}`}\n          </tspan>\n\n          <ToolTipTSpanLabel\n            fill={labelFill}\n            fontWeight={labelFontWeight}\n            key=\"label_V\"\n          >\n            {displayTexts.v}\n          </ToolTipTSpanLabel>\n          <tspan key=\"value_V\" fill={valueFill}>\n            {volume}\n          </tspan>\n        </ToolTipText>\n      </g>\n    );\n  }\n\n  render() {\n    return (\n      <GenericChartComponent\n        clip={false}\n        svgDraw={this.renderSVG}\n        drawOn={[\"mousemove\"]}\n      />\n    );\n  }\n}\n\nOHLCTooltip.propTypes = {\n  accessor: PropTypes.func,\n  changeFormat: PropTypes.func,\n  className: PropTypes.string,\n  displayTexts: PropTypes.object,\n  displayValuesFor: PropTypes.func,\n  fontFamily: PropTypes.string,\n  fontSize: PropTypes.string,\n  fontWeight: PropTypes.number,\n  labelFill: PropTypes.string,\n  labelFontWeight: PropTypes.number,\n  ohlcFormat: PropTypes.func,\n  onClick: PropTypes.func,\n  origin: PropTypes.array,\n  percentFormat: PropTypes.func,\n  textFill: PropTypes.func,\n  volumeFormat: PropTypes.func\n};\n\nOHLCTooltip.defaultProps = {\n  accessor: (d) => d,\n  changeFormat: format(\"+.2f\"),\n  className: \"react-financial-charts-tooltip-hover\",\n  displayTexts: displayTextsDefault,\n  displayValuesFor: (_, props) => props.currentItem,\n  fontFamily: \"-apple-system, system-ui, 'Helvetica Neue', Ubuntu, sans-serif\",\n  fontSize: \"12px\",\n  fontWeight: 300,\n  labelFill: \"#9EAAC7\",\n  labelFontWeight: 300,\n  ohlcFormat: format(\".2f\"),\n  onClick: null,\n  origin: [0, 0],\n  percentFormat: format(\"+.2%\"),\n  textFill: null,\n  volumeFormat: format(\".4s\")\n};\n\nexport default OHLCTooltip;\n","import React, { useState, useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { format } from \"d3-format\";\nimport { timeFormat } from \"d3-time-format\";\nimport { scaleLinear, scaleLog } from \"d3-scale\";\nimport { curveStepAfter } from \"d3-shape\";\nimport {\n  discontinuousTimeScaleProviderBuilder,\n  Chart,\n  ChartCanvas,\n  BarSeries,\n  CandlestickSeries,\n  OHLCSeries,\n  LineSeries,\n  AreaSeries,\n  AreaOnlySeries,\n  ScatterSeries,\n  CircleMarker,\n  StraightLine,\n  RenkoSeries,\n  KagiSeries,\n  PointAndFigureSeries,\n  heikinAshi,\n  renko,\n  kagi,\n  pointAndFigure,\n  lastVisibleItemBasedZoomAnchor,\n  XAxis,\n  YAxis,\n  CrossHairCursor,\n  EdgeIndicator,\n  MouseCoordinateX,\n  MouseCoordinateY,\n  ZoomButtons,\n  withDeviceRatio,\n  withSize\n} from \"react-financial-charts\";\nimport OHLCTooltip from \"./OHLCTooltip\";\n\nconst axisStyles = {\n  strokeStyle: \"#383E55\", // Color.GRAY\n  strokeWidth: 2,\n  tickLabelFill: \"#9EAAC7\", // Color.LIGHT_GRAY\n  tickStrokeStyle: \"#383E55\",\n  gridLinesStrokeStyle: \"rgba(56, 62, 85, 0.5)\" // Color.GRAY w Opacity\n};\n\nconst coordinateStyles = {\n  fill: \"#383E55\",\n  textFill: \"#FFFFFF\"\n};\n\nconst zoomButtonStyles = {\n  fill: \"#383E55\",\n  fillOpacity: 0.75,\n  strokeWidth: 0,\n  textFill: \"#9EAAC7\"\n};\n\nconst crossHairStyles = {\n  strokeStyle: \"#9EAAC7\"\n};\n\n// Default green/red colors for candlesticks\nconst openCloseColor = (d) => (d.close > d.open ? \"#26a69a\" : \"#ef5350\");\n\n// yExtentsCalculator: used from updating price series\n// https://github.com/react-financial/react-financial-charts/blob/main/packages/stories/src/features/updating/BasicLineSeries.tsx#L55\nconst yExtentsCalculator = ({ plotData }) => {\n  let min;\n  let max;\n  for (const { low, high } of plotData) {\n    if (min === undefined) min = low;\n    if (max === undefined) max = high;\n    if (low !== undefined && min > low) min = low;\n    if (high !== undefined && max < high) max = high;\n  }\n  if (min === undefined) min = 0;\n  if (max === undefined) max = 0;\n\n  const padding = (max - min) * 0.1;\n  return [min - padding, max + padding * 2];\n};\n\nconst FinancialChart = React.memo(({\n  data: initialData,\n  dateTimeFormat,\n  height,\n  margin,\n  priceDisplayFormat,\n  ratio,\n  width,\n  axisSettings = { auto: true, log: false, percent: false },\n  chartType = \"candles\"\n}) => {\n  const [resetCount, setResetCount] = useState(0);\n\n  if (!initialData || initialData.length === 0 || !height || !ratio || !width) return null;\n\n  // Transform data for advanced chart types that require data transformation\n  const transformedData = useMemo(() => {\n    try {\n      switch (chartType) {\n        case \"heikinAshi\":\n          // Use the calculator directly - it returns the transformed OHLC data\n          const haCalculator = heikinAshi();\n          return haCalculator(initialData);\n        \n        case \"renko\":\n          const renkoCalculator = renko()\n            .options({ boxSize: 1.0, sourcePath: \"close\" });\n          return renkoCalculator(initialData);\n        \n        case \"kagi\":\n          const kagiCalculator = kagi()\n            .options({ reverseType: \"ATR\", windowSize: 14, reverseValue: 2 });\n          return kagiCalculator(initialData);\n        \n        case \"pointFigure\":\n          try {\n            // Simplified P&F settings to avoid complex calculations\n            const pfCalculator = pointAndFigure()\n              .options({ \n                boxSize: 1.0, \n                reverseType: \"fixed\", \n                reverseValue: 3,\n                sourcePath: \"close\" \n              });\n            const pfData = pfCalculator(initialData);\n            console.log(\"P&F Data structure:\", pfData?.slice(0, 2)); // Debug log\n            return pfData;\n          } catch (error) {\n            console.warn(\"Point & Figure transformation failed:\", error);\n            return initialData; // Fallback to original data\n          }\n        \n        default:\n          return initialData;\n      }\n    } catch (error) {\n      console.warn(\"Data transformation failed for\", chartType, error);\n      return initialData; // Fallback to original data\n    }\n  }, [initialData, chartType]);\n\n  const timeDisplayFormat = timeFormat(dateTimeFormat);\n  const xScaleProvider = discontinuousTimeScaleProviderBuilder().inputDateAccessor(\n    (d) => d.date\n  );\n  const { data, xScale, xAccessor, displayXAccessor } = xScaleProvider(\n    transformedData\n  );\n\n  // Create custom Y scale based on axis settings\n  const yScale = useMemo(() => {\n    if (axisSettings.log) {\n      return scaleLog();\n    }\n    return scaleLinear();\n  }, [axisSettings.log]);\n\n  // Custom yExtents calculator for percentage mode\n  const customYExtentsCalculator = useMemo(() => {\n    if (axisSettings.percent && data.length > 0) {\n      const firstPrice = data[0].close;\n      return ({ plotData }) => {\n        let min = 0;\n        let max = 0;\n        for (const item of plotData) {\n          const percentChange = ((item.close - firstPrice) / firstPrice) * 100;\n          if (min > percentChange) min = percentChange;\n          if (max < percentChange) max = percentChange;\n        }\n        const padding = Math.abs(max - min) * 0.1;\n        return [min - padding, max + padding];\n      };\n    }\n    return yExtentsCalculator;\n  }, [axisSettings.percent, data]);\n\n  // Custom format for percentage mode\n  const customPriceFormat = useMemo(() => {\n    if (axisSettings.percent) {\n      return format(\"+.2f\");\n    }\n    return priceDisplayFormat;\n  }, [axisSettings.percent, priceDisplayFormat]);\n\n  const min = xAccessor(data[Math.max(0, data.length - parseInt(width / 5))]);\n  const max = xAccessor(data[data.length - 1]);\n  const xExtents = [min, max + 1];\n\n  const gridHeight = height - margin.top - margin.bottom;\n  const barChartHeight = gridHeight / 5;\n  const barChartOrigin = (_, h) => [0, h - barChartHeight];\n\n  // Function to render the appropriate chart series based on chartType\n  const renderPriceSeries = () => {\n    switch (chartType) {\n      case \"bars\":\n        return <OHLCSeries stroke={openCloseColor} strokeWidth={1} />;\n      case \"candles\":\n        return <CandlestickSeries />;\n      case \"hollow\":\n        return (\n          <CandlestickSeries\n            fill={(d) => d.close > d.open ? \"transparent\" : openCloseColor(d)}\n            stroke={openCloseColor}\n            candleStrokeWidth={1}\n          />\n        );\n      case \"volume\":\n        return (\n          <CandlestickSeries\n            fill={(d) => {\n              const maxVolume = Math.max(...initialData.map(item => item.volume));\n              const volumeOpacity = Math.min(0.8, Math.max(0.1, d.volume / maxVolume));\n              const baseColor = d.close > d.open ? \"#26a69a\" : \"#ef5350\";\n              return `${baseColor}${Math.round(volumeOpacity * 255).toString(16).padStart(2, '0')}`;\n            }}\n            stroke={openCloseColor}\n            candleStrokeWidth={0.5}\n          />\n        );\n      case \"line\":\n        return (\n          <LineSeries \n            yAccessor={(d) => d.close} \n            strokeStyle=\"#26a69a\" \n            strokeWidth={2}\n          />\n        );\n      case \"lineMarkers\":\n        return (\n          <>\n            <LineSeries \n              yAccessor={(d) => d.close} \n              strokeStyle=\"#26a69a\" \n              strokeWidth={2}\n            />\n            <ScatterSeries \n              yAccessor={(d) => d.close}\n              marker={CircleMarker}\n              markerProps={{\n                r: 3,\n                fillStyle: \"#26a69a\",\n                strokeStyle: \"#26a69a\",\n                strokeWidth: 1\n              }}\n            />\n          </>\n        );\n      case \"step\":\n        return (\n          <LineSeries \n            yAccessor={(d) => d.close} \n            strokeStyle=\"#26a69a\" \n            strokeWidth={2}\n            curve={curveStepAfter}\n          />\n        );\n      case \"area\":\n        return (\n          <AreaSeries \n            yAccessor={(d) => d.close} \n            strokeStyle=\"#26a69a\" \n            strokeWidth={2}\n            fillStyle=\"rgba(38, 166, 154, 0.2)\"\n          />\n        );\n      case \"hlcArea\":\n        return (\n          <>\n            <AreaOnlySeries \n              yAccessor={(d) => d.high}\n              base={(yScale, d) => yScale(d.low)}\n              fillStyle=\"rgba(38, 166, 154, 0.1)\"\n            />\n            <LineSeries \n              yAccessor={(d) => d.close} \n              strokeStyle=\"#26a69a\" \n              strokeWidth={2}\n            />\n          </>\n        );\n      case \"baseline\":\n        return (\n          <AreaSeries \n            yAccessor={(d) => d.close}\n            baseAt={(yScale) => {\n              // Calculate baseline as first close price in the data\n              const firstClose = initialData[0]?.close || 0;\n              return yScale(firstClose);\n            }}\n            strokeStyle={(d) => d.close >= initialData[0]?.close ? \"#26a69a\" : \"#ef5350\"}\n            strokeWidth={2}\n            fillStyle={(d) => d.close >= initialData[0]?.close \n              ? \"rgba(38, 166, 154, 0.2)\" \n              : \"rgba(239, 83, 80, 0.2)\"\n            }\n          />\n        );\n      case \"columns\":\n        return (\n          <BarSeries \n            yAccessor={(d) => d.close}\n            fillStyle={(d) => d.close >= initialData[0]?.close ? \"#26a69a\" : \"#ef5350\"}\n            strokeStyle={(d) => d.close >= initialData[0]?.close ? \"#26a69a\" : \"#ef5350\"}\n          />\n        );\n      case \"highLow\":\n        return (\n          <>\n            {/* High-Low lines using modified OHLCSeries approach */}\n            <OHLCSeries \n              strokeWidth={1}\n              stroke={(d) => \"#9EAAC7\"}\n              yAccessor={(d) => ({ \n                open: d.high, \n                high: d.high, \n                low: d.low, \n                close: d.high \n              })}\n            />\n            {/* Close price markers */}\n            <ScatterSeries \n              yAccessor={(d) => d.close}\n              marker={CircleMarker}\n              markerProps={{\n                r: 3,\n                fillStyle: (d) => d.close >= initialData[0]?.close ? \"#26a69a\" : \"#ef5350\",\n                strokeStyle: (d) => d.close >= initialData[0]?.close ? \"#26a69a\" : \"#ef5350\",\n                strokeWidth: 1\n              }}\n            />\n          </>\n        );\n      case \"heikinAshi\":\n        return (\n          <CandlestickSeries \n            fill={(d) => d.close > d.open ? \"#26a69a\" : \"#ef5350\"}\n            stroke={(d) => d.close > d.open ? \"#26a69a\" : \"#ef5350\"}\n          />\n        );\n      case \"renko\":\n        return (\n          <RenkoSeries \n            fill={{\n              up: \"#26a69a\",\n              down: \"#ef5350\",\n              partial: \"rgba(38, 166, 154, 0.3)\"\n            }}\n            stroke={{\n              up: \"#26a69a\",\n              down: \"#ef5350\"\n            }}\n          />\n        );\n      case \"kagi\":\n        return (\n          <KagiSeries \n            stroke={{\n              yang: \"#26a69a\",\n              yin: \"#ef5350\"\n            }}\n            strokeWidth={2}\n            currentValueStroke=\"#9EAAC7\"\n          />\n        );\n      case \"pointFigure\":\n        // Check if data has the required structure for Point & Figure\n        if (data && data.length > 0 && data[0].boxes) {\n          return (\n            <PointAndFigureSeries \n              fill={{\n                up: \"#26a69a\",\n                down: \"#ef5350\"\n              }}\n              stroke={{\n                up: \"#26a69a\",\n                down: \"#ef5350\"\n              }}\n              strokeWidth={1}\n            />\n          );\n        } else {\n          // Fallback to candlesticks if P&F data structure is invalid\n          return (\n            <CandlestickSeries \n              fill={(d) => d.close > d.open ? \"#26a69a\" : \"#ef5350\"}\n              stroke={(d) => d.close > d.open ? \"#26a69a\" : \"#ef5350\"}\n            />\n          );\n        }\n      case \"lineBreak\":\n        return (\n          <CandlestickSeries \n            fill={(d) => d.close > d.open ? \"#26a69a\" : \"#ef5350\"}\n            stroke={(d) => d.close > d.open ? \"#26a69a\" : \"#ef5350\"}\n            candleStrokeWidth={1}\n          />\n        );\n      case \"range\":\n        return (\n          <BarSeries \n            yAccessor={(d) => d.close}\n            fillStyle={(d) => d.close >= initialData[0]?.close ? \"#26a69a\" : \"#ef5350\"}\n            strokeStyle={(d) => d.close >= initialData[0]?.close ? \"#26a69a\" : \"#ef5350\"}\n          />\n        );\n      default:\n        return <CandlestickSeries />;\n    }\n  };\n\n  // ChartCanvas is drawn from top to bottom\n  return (\n    <ChartCanvas\n      height={height}\n      ratio={ratio}\n      width={width}\n      margin={margin}\n      seriesName={`Chart ${resetCount}`}\n      data={data}\n      xScale={xScale}\n      xAccessor={xAccessor}\n      displayXAccessor={displayXAccessor}\n      xExtents={xExtents}\n      zoomAnchor={lastVisibleItemBasedZoomAnchor}\n    >\n      {/* Volume Chart */}\n      <Chart\n        id={1}\n        height={barChartHeight}\n        origin={barChartOrigin}\n        yExtents={(d) => d.volume}\n      >\n        <BarSeries\n          fillStyle={(d) =>\n            d.close > d.open\n              ? \"rgba(38, 166, 154, 0.3)\"\n              : \"rgba(239, 83, 80, 0.3)\"\n          }\n          yAccessor={(d) => d.volume}\n        />\n      </Chart>\n\n      {/* Price Chart */}\n      <Chart \n        id={2} \n        yExtentsCalculator={customYExtentsCalculator}\n        yScale={yScale}\n      >\n        <XAxis {...axisStyles} showGridLines />\n        <MouseCoordinateX\n          displayFormat={timeDisplayFormat}\n          {...coordinateStyles}\n        />\n        <YAxis \n          {...axisStyles} \n          showGridLines \n          tickFormat={customPriceFormat}\n        />\n        <MouseCoordinateY\n          rectWidth={margin.right}\n          displayFormat={customPriceFormat}\n          {...coordinateStyles}\n        />\n\n        {/* YAxis close price highlight */}\n        <EdgeIndicator\n          itemType=\"last\"\n          rectWidth={margin.right}\n          fill={openCloseColor}\n          lineStroke={openCloseColor}\n          displayFormat={customPriceFormat}\n          yAccessor={(d) => d.close}\n        />\n\n        {renderPriceSeries()}\n        <OHLCTooltip\n          origin={[8, 16]}\n          textFill={openCloseColor}\n          className=\"react-no-select\"\n        />\n        <ZoomButtons\n          onReset={() => setResetCount(resetCount + 1)}\n          {...zoomButtonStyles}\n        />\n      </Chart>\n      <CrossHairCursor {...crossHairStyles} />\n    </ChartCanvas>\n  );\n});\n\nFinancialChart.propTypes = {\n  data: PropTypes.arrayOf(\n    PropTypes.shape({\n      date: PropTypes.instanceOf(Date).isRequired,\n      open: PropTypes.number.isRequired,\n      high: PropTypes.number.isRequired,\n      low: PropTypes.number.isRequired,\n      close: PropTypes.number.isRequired,\n      volume: PropTypes.number.isRequired\n    })\n  ).isRequired,\n  dateTimeFormat: PropTypes.string,\n  height: PropTypes.number,\n  margin: PropTypes.object,\n  priceDisplayFormat: PropTypes.func,\n  ratio: PropTypes.number,\n  width: PropTypes.number,\n  axisSettings: PropTypes.shape({\n    auto: PropTypes.bool,\n    log: PropTypes.bool,\n    percent: PropTypes.bool\n  }),\n  chartType: PropTypes.string\n};\n\nFinancialChart.defaultProps = {\n  dateTimeFormat: \"%d %b '%y \\xa0 %H:%M\",\n  height: 0,\n  margin: { left: 0, right: 48, top: 0, bottom: 24 },\n  priceDisplayFormat: format(\".2f\"),\n  ratio: 0,\n  width: 0\n};\n\n// Export the raw component for custom sizing\nexport const PriceChartBase = FinancialChart;\n\n// Export the auto-sized version that fills parent container\nexport const PriceChart = withSize({ style: { width: \"100%\", height: \"100%\" } })(\n  withDeviceRatio()(FinancialChart)\n);\n","// Convert intervals to minutes for calculation\nconst intervalToMinutes = {\n  // Ticks - not time-based, return null\n  \"1 tick\": null,\n  \"10 ticks\": null,\n  \"100 ticks\": null,\n  \"1000 ticks\": null,\n  \n  // Seconds\n  \"1 second\": 1/60,\n  \"5 seconds\": 5/60,\n  \"10 seconds\": 10/60,\n  \"15 seconds\": 15/60,\n  \"30 seconds\": 30/60,\n  \"45 seconds\": 45/60,\n  \n  // Minutes\n  \"1 minute\": 1,\n  \"2 minutes\": 2,\n  \"3 minutes\": 3,\n  \"5 minutes\": 5,\n  \"10 minutes\": 10,\n  \"15 minutes\": 15,\n  \"30 minutes\": 30,\n  \"45 minutes\": 45,\n  \n  // Hours\n  \"1 hour\": 60,\n  \"2 hours\": 120,\n  \"3 hours\": 180,\n  \"4 hours\": 240,\n  \n  // Days\n  \"1 day\": 1440,\n  \"1 week\": 10080,\n  \"1 month\": 43200, // 30 days\n  \"3 months\": 129600, // 90 days\n  \"6 months\": 259200, // 180 days\n  \"12 months\": 525600 // 365 days\n};\n\n// Convert ranges to minutes for calculation\nconst rangeToMinutes = {\n  \"1D\": 1440,\n  \"5D\": 7200,\n  \"1M\": 43200, // 30 days\n  \"3M\": 129600, // 90 days\n  \"6M\": 259200, // 180 days\n  \"YTD\": null, // Variable based on current date\n  \"1Y\": 525600, // 365 days\n  \"5Y\": 2628000, // 5 * 365 days\n  \"All\": null // Depends on data\n};\n\n// Convert ranges to days for tick/range calculations\nconst rangeToDays = {\n  \"1D\": 1,\n  \"5D\": 5,\n  \"1M\": 30,\n  \"3M\": 90,\n  \"6M\": 180,\n  \"YTD\": null,\n  \"1Y\": 365,\n  \"5Y\": 1825,\n  \"All\": null\n};\n\nexport const calculateCandleCount = (interval, range) => {\n  // Handle tick-based intervals\n  if (interval.includes(\"tick\")) {\n    const days = rangeToDays[range];\n    if (!days) return null;\n    \n    // Assume 1000 ticks per day for calculation (this varies by market)\n    const ticksPerDay = 1000;\n    const totalTicks = days * ticksPerDay;\n    \n    const tickValue = parseInt(interval.split(\" \")[0]);\n    return Math.floor(totalTicks / tickValue);\n  }\n  \n  // Handle range-based intervals\n  if (interval.includes(\"range\")) {\n    const days = rangeToDays[range];\n    if (!days) return null;\n    \n    // Assume 100 ranges per day for calculation\n    const rangesPerDay = 100;\n    const totalRanges = days * rangesPerDay;\n    \n    const rangeValue = parseInt(interval.split(\" \")[0]);\n    return Math.floor(totalRanges / rangeValue);\n  }\n  \n  // Handle time-based intervals\n  const intervalMinutes = intervalToMinutes[interval];\n  const rangeMinutes = rangeToMinutes[range];\n  \n  if (!intervalMinutes || !rangeMinutes) return null;\n  \n  return Math.floor(rangeMinutes / intervalMinutes);\n};\n\nexport const isValidCombination = (interval, range) => {\n  // Handle special cases\n  if (range === \"YTD\" || range === \"All\") return true;\n  if (interval.includes(\"tick\") || interval.includes(\"range\")) return true;\n  \n  const intervalMinutes = intervalToMinutes[interval];\n  const rangeMinutes = rangeToMinutes[range];\n  \n  if (!intervalMinutes || !rangeMinutes) return false;\n  \n  // Invalid if interval is larger than the range\n  return intervalMinutes <= rangeMinutes;\n};\n\nexport const getInvalidMessage = (interval, range) => {\n  return `Invalid combination: ${interval} interval cannot be used with ${range} range. The interval is larger than the time range.`;\n};\n\nexport const filterDataByRange = (data, range) => {\n  if (!data || data.length === 0) return data;\n  \n  const now = new Date();\n  const endDate = data[data.length - 1].date;\n  let startDate;\n  \n  switch (range) {\n    case \"1D\":\n      startDate = new Date(endDate.getTime() - (24 * 60 * 60 * 1000));\n      break;\n    case \"5D\":\n      startDate = new Date(endDate.getTime() - (5 * 24 * 60 * 60 * 1000));\n      break;\n    case \"1M\":\n      startDate = new Date(endDate.getTime() - (30 * 24 * 60 * 60 * 1000));\n      break;\n    case \"3M\":\n      startDate = new Date(endDate.getTime() - (90 * 24 * 60 * 60 * 1000));\n      break;\n    case \"6M\":\n      startDate = new Date(endDate.getTime() - (180 * 24 * 60 * 60 * 1000));\n      break;\n    case \"YTD\":\n      startDate = new Date(endDate.getFullYear(), 0, 1);\n      break;\n    case \"1Y\":\n      startDate = new Date(endDate.getTime() - (365 * 24 * 60 * 60 * 1000));\n      break;\n    case \"5Y\":\n      startDate = new Date(endDate.getTime() - (5 * 365 * 24 * 60 * 60 * 1000));\n      break;\n    case \"All\":\n    default:\n      return data;\n  }\n  \n  return data.filter(item => item.date >= startDate);\n};","// Data transformation utilities for different timeframes\n\n// Parse interval string to get numeric value and unit\nconst parseInterval = (intervalStr) => {\n  const interval = intervalStr?.full || intervalStr;\n  if (!interval || typeof interval !== 'string') return null;\n  \n  const matches = interval.match(/^(\\d+)\\s*(\\w+)$/);\n  if (!matches) return null;\n  \n  const [, value, unit] = matches;\n  return {\n    value: parseInt(value),\n    unit: unit.toLowerCase()\n  };\n};\n\n// Convert time units to minutes for comparison\nconst getMinutesFromUnit = (value, unit) => {\n  switch (unit) {\n    case 'second':\n    case 'seconds':\n      return value / 60;\n    case 'minute':\n    case 'minutes':\n      return value;\n    case 'hour':\n    case 'hours':\n      return value * 60;\n    case 'day':\n    case 'days':\n      return value * 1440; // 24 * 60\n    case 'week':\n    case 'weeks':\n      return value * 10080; // 7 * 24 * 60\n    case 'month':\n    case 'months':\n      return value * 43200; // 30 * 24 * 60 (approximate)\n    default:\n      return null;\n  }\n};\n\n// Check if transformation is possible\nexport const canTransformData = (rawDataInterval, targetInterval) => {\n  // For ticks and ranges, we can't transform without knowing the actual tick/range data\n  if (targetInterval.includes('tick') || targetInterval.includes('range')) {\n    return false;\n  }\n  \n  const rawParsed = parseInterval(rawDataInterval);\n  const targetParsed = parseInterval(targetInterval);\n  \n  if (!rawParsed || !targetParsed) return false;\n  \n  const rawMinutes = getMinutesFromUnit(rawParsed.value, rawParsed.unit);\n  const targetMinutes = getMinutesFromUnit(targetParsed.value, targetParsed.unit);\n  \n  if (!rawMinutes || !targetMinutes) return false;\n  \n  // Can only aggregate to larger timeframes\n  return targetMinutes >= rawMinutes && targetMinutes % rawMinutes === 0;\n};\n\n// Aggregate OHLC data for a time period\nconst aggregateCandles = (candles) => {\n  if (!candles || candles.length === 0) return null;\n  \n  const firstCandle = candles[0];\n  const lastCandle = candles[candles.length - 1];\n  \n  let high = firstCandle.high;\n  let low = firstCandle.low;\n  let volume = 0;\n  \n  for (const candle of candles) {\n    if (candle.high > high) high = candle.high;\n    if (candle.low < low) low = candle.low;\n    volume += candle.volume;\n  }\n  \n  return {\n    date: firstCandle.date,\n    open: firstCandle.open,\n    high,\n    low,\n    close: lastCandle.close,\n    volume\n  };\n};\n\n// Transform data to target interval\nexport const transformDataToInterval = (rawData, targetInterval) => {\n  if (!rawData || rawData.length === 0) return rawData;\n  \n  // If target interval is not parseable (like ticks/ranges), return original data\n  const targetParsed = parseInterval(targetInterval);\n  if (!targetParsed) return rawData;\n  \n  const targetMinutes = getMinutesFromUnit(targetParsed.value, targetParsed.unit);\n  if (!targetMinutes) return rawData;\n  \n  // For sub-minute intervals, we can't transform from minute data\n  if (targetMinutes < 1) {\n    throw new Error(`Cannot transform to ${targetInterval}: target interval is smaller than source data resolution`);\n  }\n  \n  const result = [];\n  let currentGroup = [];\n  let groupStartTime = null;\n  \n  for (const dataPoint of rawData) {\n    const dataTime = new Date(dataPoint.date);\n    \n    // Calculate the time bucket this data point belongs to\n    let bucketStart;\n    \n    if (targetParsed.unit.includes('minute')) {\n      // For minute intervals, align to minute boundaries\n      bucketStart = new Date(dataTime);\n      const minutes = Math.floor(dataTime.getMinutes() / targetParsed.value) * targetParsed.value;\n      bucketStart.setMinutes(minutes, 0, 0);\n    } else if (targetParsed.unit.includes('hour')) {\n      // For hour intervals, align to hour boundaries\n      bucketStart = new Date(dataTime);\n      const hours = Math.floor(dataTime.getHours() / targetParsed.value) * targetParsed.value;\n      bucketStart.setHours(hours, 0, 0, 0);\n    } else if (targetParsed.unit.includes('day')) {\n      // For day intervals, align to day boundaries\n      bucketStart = new Date(dataTime);\n      bucketStart.setHours(0, 0, 0, 0);\n      if (targetParsed.value > 1) {\n        const daysSinceEpoch = Math.floor(bucketStart.getTime() / (1000 * 60 * 60 * 24));\n        const alignedDays = Math.floor(daysSinceEpoch / targetParsed.value) * targetParsed.value;\n        bucketStart = new Date(alignedDays * 1000 * 60 * 60 * 24);\n      }\n    } else if (targetParsed.unit.includes('week')) {\n      // For week intervals, align to week boundaries (Monday)\n      bucketStart = new Date(dataTime);\n      const dayOfWeek = (bucketStart.getDay() + 6) % 7; // Make Monday = 0\n      bucketStart.setDate(bucketStart.getDate() - dayOfWeek);\n      bucketStart.setHours(0, 0, 0, 0);\n    } else if (targetParsed.unit.includes('month')) {\n      // For month intervals, align to month boundaries\n      bucketStart = new Date(dataTime.getFullYear(), dataTime.getMonth(), 1);\n      if (targetParsed.value > 1) {\n        const monthsAligned = Math.floor(bucketStart.getMonth() / targetParsed.value) * targetParsed.value;\n        bucketStart.setMonth(monthsAligned);\n      }\n    } else {\n      // Fallback: use the original data point time\n      bucketStart = dataTime;\n    }\n    \n    // If we're starting a new group or this point belongs to a different bucket\n    if (groupStartTime === null || bucketStart.getTime() !== groupStartTime.getTime()) {\n      // Process the previous group if it exists\n      if (currentGroup.length > 0) {\n        const aggregated = aggregateCandles(currentGroup);\n        if (aggregated) {\n          result.push(aggregated);\n        }\n      }\n      \n      // Start a new group\n      currentGroup = [dataPoint];\n      groupStartTime = bucketStart;\n    } else {\n      // Add to current group\n      currentGroup.push(dataPoint);\n    }\n  }\n  \n  // Process the final group\n  if (currentGroup.length > 0) {\n    const aggregated = aggregateCandles(currentGroup);\n    if (aggregated) {\n      result.push(aggregated);\n    }\n  }\n  \n  return result;\n};\n\nexport const getTransformationError = (rawDataInterval, targetInterval) => {\n  if (targetInterval.includes('tick')) {\n    return `Cannot transform to tick-based intervals. Tick data requires specialized market data.`;\n  }\n  \n  if (targetInterval.includes('range')) {\n    return `Cannot transform to range-based intervals. Range data requires specialized market data.`;\n  }\n  \n  const rawParsed = parseInterval(rawDataInterval);\n  const targetParsed = parseInterval(targetInterval);\n  \n  if (!rawParsed || !targetParsed) {\n    return `Invalid interval format.`;\n  }\n  \n  const rawMinutes = getMinutesFromUnit(rawParsed.value, rawParsed.unit);\n  const targetMinutes = getMinutesFromUnit(targetParsed.value, targetParsed.unit);\n  \n  if (!rawMinutes || !targetMinutes) {\n    return `Unsupported time unit.`;\n  }\n  \n  if (targetMinutes < rawMinutes) {\n    return `Cannot transform from ${rawDataInterval} to ${targetInterval}: target interval is smaller than source data resolution.`;\n  }\n  \n  if (targetMinutes % rawMinutes !== 0) {\n    return `Cannot transform from ${rawDataInterval} to ${targetInterval}: intervals are not evenly divisible.`;\n  }\n  \n  return null;\n};","import React, { useState, useEffect, useRef } from \"react\";\n\nconst TopBar = React.memo(({ \n  selectedInterval = \"1D\", \n  selectedChartType = \"candles\",\n  symbolName = \"BTCUSD\",\n  symbolIcon = \"🟠\",\n  onIntervalChange,\n  onChartTypeChange,\n  onUndo,\n  onRedo\n}) => {\n  const [showIntervalMenu, setShowIntervalMenu] = useState(false);\n  const [showChartTypeMenu, setShowChartTypeMenu] = useState(false);\n  const intervalRef = useRef(null);\n  const chartTypeRef = useRef(null);\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (intervalRef.current && !intervalRef.current.contains(event.target)) {\n        setShowIntervalMenu(false);\n      }\n      if (chartTypeRef.current && !chartTypeRef.current.contains(event.target)) {\n        setShowChartTypeMenu(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  const intervals = {\n    \"TICKS\": [\n      { full: \"1 tick\", short: \"1t\" },\n      { full: \"10 ticks\", short: \"10t\" },\n      { full: \"100 ticks\", short: \"100t\" },\n      { full: \"1000 ticks\", short: \"1000t\" }\n    ],\n    \"SECONDS\": [\n      { full: \"1 second\", short: \"1s\" },\n      { full: \"5 seconds\", short: \"5s\" },\n      { full: \"10 seconds\", short: \"10s\" },\n      { full: \"15 seconds\", short: \"15s\" },\n      { full: \"30 seconds\", short: \"30s\" },\n      { full: \"45 seconds\", short: \"45s\" }\n    ],\n    \"MINUTES\": [\n      { full: \"1 minute\", short: \"1m\" },\n      { full: \"2 minutes\", short: \"2m\" },\n      { full: \"3 minutes\", short: \"3m\" },\n      { full: \"5 minutes\", short: \"5m\" },\n      { full: \"10 minutes\", short: \"10m\" },\n      { full: \"15 minutes\", short: \"15m\" },\n      { full: \"30 minutes\", short: \"30m\" },\n      { full: \"45 minutes\", short: \"45m\" }\n    ],\n    \"HOURS\": [\n      { full: \"1 hour\", short: \"1H\" },\n      { full: \"2 hours\", short: \"2H\" },\n      { full: \"3 hours\", short: \"3H\" },\n      { full: \"4 hours\", short: \"4H\" }\n    ],\n    \"DAYS\": [\n      { full: \"1 day\", short: \"1D\" },\n      { full: \"1 week\", short: \"1W\" },\n      { full: \"1 month\", short: \"1M\" },\n      { full: \"3 months\", short: \"3M\" },\n      { full: \"6 months\", short: \"6M\" },\n      { full: \"12 months\", short: \"12M\" }\n    ],\n    \"RANGES\": [\n      { full: \"1 range\", short: \"1R\" },\n      { full: \"10 ranges\", short: \"10R\" },\n      { full: \"100 ranges\", short: \"100R\" },\n      { full: \"1000 ranges\", short: \"1000R\" }\n    ]\n  };\n\n  const chartTypes = [\n    { id: \"bars\", label: \"Bars\", icon: \"Bars\" },\n    { id: \"candles\", label: \"Candles\", icon: \"Candlestick\" },\n    { id: \"hollow\", label: \"Hollow candles\", icon: \"HollowCandles\" },\n    { id: \"volume\", label: \"Volume candles\", icon: \"VolumeCandles\" },\n    { type: \"separator\" },\n    { id: \"line\", label: \"Line\", icon: \"Lines\" },\n    { id: \"lineMarkers\", label: \"Line with markers\", icon: \"LineMarkers\" },\n    { id: \"step\", label: \"Step line\", icon: \"StepLine\" },\n    { type: \"separator\" },\n    { id: \"area\", label: \"Area\", icon: \"Area\" },\n    { id: \"hlcArea\", label: \"HLC area\", icon: \"HLCArea\" },\n    { id: \"baseline\", label: \"Baseline\", icon: \"Baseline\" },\n    { type: \"separator\" },\n    { id: \"columns\", label: \"Columns\", icon: \"Columns\" },\n    { id: \"highLow\", label: \"High-low\", icon: \"HighLow\" },\n    { type: \"separator\" },\n    { id: \"volumeFootprint\", label: \"Volume footprint\", icon: \"VolumeFootprint\" },\n    { id: \"timePriceOpportunity\", label: \"Time Price Opportunity\", icon: \"TimePriceOpportunity\" },\n    { id: \"sessionVolume\", label: \"Session volume profile\", icon: \"SessionVolumeProfile\" },\n    { type: \"separator\" },\n    { id: \"heikinAshi\", label: \"Heikin Ashi\", icon: \"HeikinAshi\" },\n    { id: \"renko\", label: \"Renko\", icon: \"Renko\" },\n    { id: \"lineBreak\", label: \"Line break\", icon: \"LineBreak\" },\n    { id: \"kagi\", label: \"Kagi\", icon: \"Kagi\" },\n    { id: \"pointFigure\", label: \"Point & figure\", icon: \"PointAndFigure\" },\n    { id: \"range\", label: \"Range\", icon: \"Range\" }\n  ];\n\n  const handleIntervalClick = (intervalObj) => {\n    setShowIntervalMenu(false);\n    if (onIntervalChange) {\n      onIntervalChange(intervalObj);\n    } else {\n      alert(`Interval change to ${intervalObj.full} not implemented`);\n    }\n  };\n\n  // Helper function to get the short form for display\n  const getSelectedIntervalShort = () => {\n    if (typeof selectedInterval === 'string') {\n      // Handle legacy format, find the matching interval\n      for (const category of Object.values(intervals)) {\n        for (const interval of category) {\n          if (interval.full === selectedInterval) {\n            return interval.short;\n          }\n        }\n      }\n      return selectedInterval; // fallback\n    }\n    return selectedInterval?.short || selectedInterval;\n  };\n\n  const handleChartTypeClick = (type) => {\n    setShowChartTypeMenu(false);\n    if (onChartTypeChange) {\n      onChartTypeChange(type.id);\n    } else {\n      alert(`Chart type change to ${type.label} not implemented`);\n    }\n  };\n\n  const handleButtonClick = (action) => {\n    switch(action) {\n      case \"undo\":\n        if (onUndo) onUndo();\n        else alert(\"Undo not implemented\");\n        break;\n      case \"redo\":\n        if (onRedo) onRedo();\n        else alert(\"Redo not implemented\");\n        break;\n      case \"indicators\":\n        alert(\"Indicators not implemented\");\n        break;\n      case \"alert\":\n        alert(\"Alert not implemented\");\n        break;\n      case \"replay\":\n        alert(\"Replay not implemented\");\n        break;\n      default:\n        alert(`${action} not implemented`);\n    }\n  };\n\n  return (\n    <div className=\"topbar\">\n      <div className=\"topbar-left\">\n        <div className=\"topbar-symbol\">\n          <span className=\"symbol-icon\">{symbolIcon}</span>\n          <span className=\"symbol-name\">{symbolName}</span>\n        </div>\n\n        <div className=\"topbar-divider\" />\n\n        <div className=\"interval-selector\" ref={intervalRef}>\n          <button \n            className=\"interval-button\"\n            onClick={() => setShowIntervalMenu(!showIntervalMenu)}\n          >\n            {getSelectedIntervalShort()}\n          </button>\n          {showIntervalMenu && (\n            <div className=\"interval-menu\">\n              {Object.entries(intervals).map(([category, items]) => (\n                <div key={category} className=\"interval-category\">\n                  <div className=\"interval-category-header\">{category}</div>\n                  {items.map(intervalObj => (\n                    <button\n                      key={intervalObj.full}\n                      className={`interval-item ${\n                        (selectedInterval?.full || selectedInterval) === intervalObj.full ? 'active' : ''\n                      }`}\n                      onClick={() => handleIntervalClick(intervalObj)}\n                    >\n                      {intervalObj.full}\n                    </button>\n                  ))}\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n\n        <div className=\"topbar-divider\" />\n\n        <div className=\"chart-type-selector\" ref={chartTypeRef}>\n          <button \n            className=\"chart-type-button\"\n            onClick={() => setShowChartTypeMenu(!showChartTypeMenu)}\n          >\n            <img \n              src={`/TradingViewIcons/${chartTypes.find(t => t.id === selectedChartType)?.icon || 'Candlestick'}.svg`} \n              alt=\"Chart type\" \n              width=\"24\" \n              height=\"24\"\n            />\n          </button>\n          {showChartTypeMenu && (\n            <div className=\"chart-type-menu\">\n              {chartTypes.map((type, index) => (\n                type.type === \"separator\" ? (\n                  <div key={`separator-${index}`} className=\"chart-type-separator\" />\n                ) : (\n                  <button\n                    key={type.id}\n                    className={`chart-type-item ${type.id === selectedChartType ? 'active' : ''}`}\n                    onClick={() => handleChartTypeClick(type)}\n                  >\n                    <img \n                      src={`/TradingViewIcons/${type.icon}.svg`} \n                      alt={type.label} \n                      width=\"24\" \n                      height=\"24\"\n                    />\n                    <span>{type.label}</span>\n                  </button>\n                )\n              ))}\n            </div>\n          )}\n        </div>\n\n        <div className=\"topbar-divider\" />\n\n        <button \n          className=\"topbar-icon-btn\"\n          onClick={() => handleButtonClick(\"indicators\")}\n          title=\"Indicators\"\n        >\n          <img src=\"/TradingViewIcons/Indicator.svg\" alt=\"Indicators\" width=\"24\" height=\"24\" />\n          <span className=\"btn-label\">Indicators</span>\n        </button>\n\n        <div className=\"topbar-divider\" />\n\n        <button \n          className=\"topbar-icon-btn\"\n          onClick={() => handleButtonClick(\"alert\")}\n          title=\"Alert\"\n        >\n          <img src=\"/TradingViewIcons/Target.svg\" alt=\"Alert\" width=\"24\" height=\"24\" />\n          <span className=\"btn-label\">Alert</span>\n        </button>\n\n        <button \n          className=\"topbar-icon-btn\"\n          onClick={() => handleButtonClick(\"replay\")}\n          title=\"Replay\"\n        >\n          <img src=\"/TradingViewIcons/Rewind.svg\" alt=\"Replay\" width=\"24\" height=\"24\" />\n          <span className=\"btn-label\">Replay</span>\n        </button>\n\n        <div className=\"topbar-divider\" />\n\n        <button \n          className=\"topbar-icon-btn\"\n          onClick={() => handleButtonClick(\"undo\")}\n          title=\"Undo\"\n        >\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n            <path d=\"M6 12h10a4 4 0 0 1 0 8M6 12l3-3M6 12l3 3\" stroke=\"currentColor\" strokeWidth=\"1.5\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n          </svg>\n        </button>\n\n        <button \n          className=\"topbar-icon-btn\"\n          onClick={() => handleButtonClick(\"redo\")}\n          title=\"Redo\"\n        >\n          <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n            <path d=\"M18 12H8a4 4 0 0 0 0 8M18 12l-3-3M18 12l-3 3\" stroke=\"currentColor\" strokeWidth=\"1.5\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n          </svg>\n        </button>\n      </div>\n\n      <div className=\"topbar-right\">\n        <div className=\"price-info\">\n          <span className=\"price-open\">O 117,485.1</span>\n          <span className=\"price-high\">H 119,519.8</span>\n          <span className=\"price-low\">L 117,278.6</span>\n          <span className=\"price-close\">C 119,419.4</span>\n          <span className=\"price-change positive\">+1,966.6 (+1.67%)</span>\n        </div>\n      </div>\n    </div>\n  );\n});\n\nexport default TopBar;","import React, { useState, useEffect, useRef } from \"react\";\n\nconst LeftSidebar = React.memo(() => {\n  const [activeMenu, setActiveMenu] = useState(null);\n  const [activeTool, setActiveTool] = useState(\"cursor\");\n  const sidebarRef = useRef(null);\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (sidebarRef.current && !sidebarRef.current.contains(event.target)) {\n        setActiveMenu(null);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  const tools = [\n    { id: \"cursor\", icon: \"CrossLine\", label: \"Cross Cursor\" },\n    { id: \"trend\", icon: \"TrendLine\", label: \"Trend Line Tools\", hasSubmenu: true },\n    { id: \"fibonacci\", icon: \"Fibbinoci\", label: \"Fibonacci Tools\", hasSubmenu: true },\n    { id: \"patterns\", icon: \"TrianglePattern\", label: \"Patterns\", hasSubmenu: true },\n    { id: \"forecast\", icon: \"Forecast\", label: \"Forecast Tools\", hasSubmenu: true },\n    { id: \"measure\", icon: \"Ruler\", label: \"Measure Tools\", hasSubmenu: true },\n    { id: \"annotation\", icon: \"Text\", label: \"Annotation Tools\", hasSubmenu: true },\n    { id: \"icons\", icon: \"FlagMark\", label: \"Icons\", hasSubmenu: true },\n    { id: \"volume\", icon: \"VolumeCandles\", label: \"Volume Profile Tools\", hasSubmenu: true },\n    { id: \"search\", icon: \"Search\", label: \"Search\" },\n    { id: \"magnet\", icon: \"Magnet\", label: \"Magnet Mode\" },\n    { id: \"drawing-lock\", icon: \"Unlock\", label: \"Drawing Lock\" },\n    { id: \"hide-drawings\", icon: \"EyePaint\", label: \"Hide All Drawings\" },\n    { id: \"remove-drawings\", icon: \"Trash\", label: \"Remove All Drawings\" }\n  ];\n\n  const trendTools = [\n    { category: \"LINES\", items: [\n      { id: \"trendLine\", icon: \"TrendLine\", label: \"Trend Line\" },\n      { id: \"ray\", icon: \"Ray\", label: \"Ray\" },\n      { id: \"infoLine\", icon: \"InfoLine\", label: \"Info Line\" },\n      { id: \"extendedLine\", icon: \"ExtendedLine\", label: \"Extended Line\" },\n      { id: \"trendAngle\", icon: \"TrendAngle\", label: \"Trend Angle\" },\n      { id: \"horizontalLine\", icon: \"HorizontalLine\", label: \"Horizontal Line\" },\n      { id: \"horizontalRay\", icon: \"HorizontalRay\", label: \"Horizontal Ray\" },\n      { id: \"verticalLine\", icon: \"VerticalLine\", label: \"Vertical Line\" },\n      { id: \"crossLine\", icon: \"CrossLine\", label: \"Cross Line\" }\n    ]},\n    { category: \"CHANNELS\", items: [\n      { id: \"parallelChannel\", icon: \"ParallelChannel\", label: \"Parallel Channel\" },\n      { id: \"regressionTrend\", icon: \"RegressionTrend\", label: \"Regression Trend\" },\n      { id: \"flatTopBottom\", icon: \"FlatTopBottom\", label: \"Flat Top/Bottom\" },\n      { id: \"disjointChannel\", icon: \"DisjointChannel\", label: \"Disjoint Channel\" }\n    ]},\n    { category: \"PITCHFORKS\", items: [\n      { id: \"pitchfork\", icon: \"Pitchfork\", label: \"Pitchfork\" },\n      { id: \"schiffPitchfork\", icon: \"SchiffPitchfork\", label: \"Schiff Pitchfork\" },\n      { id: \"modifiedSchiff\", icon: \"ModifiedSchiffPitchfork\", label: \"Modified Schiff Pitchfork\" },\n      { id: \"insidePitchfork\", icon: \"InsidePitchfork\", label: \"Inside Pitchfork\" }\n    ]}\n  ];\n\n  const fibonacciTools = [\n    { id: \"fibRetracement\", icon: \"Fibbinoci\", label: \"Fib Retracement\" },\n    { id: \"fibExtension\", icon: \"Trend-BasedFibExtension\", label: \"Trend-Based Fib Extension\" },\n    { id: \"fibSpeedFan\", icon: \"FibSpeedResistanceFan\", label: \"Fib Speed Resistance Fan\" },\n    { id: \"fibTimezone\", icon: \"FibTimeZone\", label: \"Fib Timezone\" },\n    { id: \"fibCircles\", icon: \"FibCircles\", label: \"Fib Circles\" },\n    { id: \"fibSpiral\", icon: \"FibSpiral\", label: \"Fib Spiral\" },\n    { id: \"fibChannel\", icon: \"FibChannel\", label: \"Fib Channel\" },\n    { id: \"fibWedge\", icon: \"FibWedge\", label: \"Fib Wedge\" }\n  ];\n\n  const drawingTools = [\n    { category: \"BRUSHES\", items: [\n      { id: \"brush\", icon: \"Brush\", label: \"Brush\" },\n      { id: \"highlighter\", icon: \"Highlighter\", label: \"Highlighter\" }\n    ]},\n    { category: \"ARROWS\", items: [\n      { id: \"arrowMarker\", icon: \"ArrowMarker\", label: \"Arrow Marker\" },\n      { id: \"arrow\", icon: \"Arrow\", label: \"Arrow\" },\n      { id: \"arrowUp\", icon: \"ArrowMarkUp\", label: \"Arrow Mark Up\" },\n      { id: \"arrowDown\", icon: \"ArrowMarkDown\", label: \"Arrow Mark Down\" }\n    ]},\n    { category: \"SHAPES\", items: [\n      { id: \"rectangle\", icon: \"Rectangle\", label: \"Rectangle\" },\n      { id: \"rotatedRectangle\", icon: \"RotatedRectangle\", label: \"Rotated Rectangle\" },\n      { id: \"path\", icon: \"Path\", label: \"Path\" },\n      { id: \"circle\", icon: \"Circle\", label: \"Circle\" },\n      { id: \"ellipse\", icon: \"Ellipse\", label: \"Ellipse\" },\n      { id: \"polyline\", icon: \"Polyline\", label: \"Polyline\" },\n      { id: \"triangle\", icon: \"Triangle\", label: \"Triangle\" },\n      { id: \"arc\", icon: \"Arc\", label: \"Arc\" },\n      { id: \"curve\", icon: \"Curve\", label: \"Curve\" }\n    ]}\n  ];\n\n  const handleToolClick = (tool) => {\n    if (tool.hasSubmenu) {\n      setActiveMenu(activeMenu === tool.id ? null : tool.id);\n    } else {\n      setActiveTool(tool.id);\n      setActiveMenu(null);\n      if (![\"cursor\", \"magnet\", \"drawing-lock\", \"hide-drawings\", \"remove-drawings\", \"search\"].includes(tool.id)) {\n        alert(`${tool.label} tool not implemented`);\n      }\n    }\n  };\n\n  const handleSubtoolClick = (subtool) => {\n    setActiveTool(subtool.id);\n    setActiveMenu(null);\n    alert(`${subtool.label} not implemented`);\n  };\n\n  const renderSubmenu = () => {\n    switch (activeMenu) {\n      case \"trend\":\n        return (\n          <div className=\"submenu\">\n            {trendTools.map(category => (\n              <div key={category.category} className=\"submenu-category\">\n                <div className=\"submenu-category-header\">{category.category}</div>\n                {category.items.map(item => (\n                  <button\n                    key={item.id}\n                    className={`submenu-item ${activeTool === item.id ? 'active' : ''}`}\n                    onClick={() => handleSubtoolClick(item)}\n                  >\n                    <img \n                      src={`/TradingViewIcons/${item.icon}.svg`} \n                      alt={item.label} \n                      width=\"20\" \n                      height=\"20\"\n                    />\n                    <span>{item.label}</span>\n                  </button>\n                ))}\n              </div>\n            ))}\n          </div>\n        );\n      case \"fibonacci\":\n        return (\n          <div className=\"submenu\">\n            {fibonacciTools.map(item => (\n              <button\n                key={item.id}\n                className={`submenu-item ${activeTool === item.id ? 'active' : ''}`}\n                onClick={() => handleSubtoolClick(item)}\n              >\n                <img \n                  src={`/TradingViewIcons/${item.icon}.svg`} \n                  alt={item.label} \n                  width=\"16\" \n                  height=\"16\"\n                />\n                <span>{item.label}</span>\n              </button>\n            ))}\n          </div>\n        );\n      case \"annotation\":\n        return (\n          <div className=\"submenu\">\n            {drawingTools.map(category => (\n              <div key={category.category} className=\"submenu-category\">\n                <div className=\"submenu-category-header\">{category.category}</div>\n                {category.items.map(item => (\n                  <button\n                    key={item.id}\n                    className={`submenu-item ${activeTool === item.id ? 'active' : ''}`}\n                    onClick={() => handleSubtoolClick(item)}\n                  >\n                    <img \n                      src={`/TradingViewIcons/${item.icon}.svg`} \n                      alt={item.label} \n                      width=\"20\" \n                      height=\"20\"\n                    />\n                    <span>{item.label}</span>\n                  </button>\n                ))}\n              </div>\n            ))}\n          </div>\n        );\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"left-sidebar\" ref={sidebarRef}>\n      <div className=\"sidebar-tools\">\n        {tools.map(tool => (\n          <button\n            key={tool.id}\n            className={`sidebar-tool ${activeTool === tool.id || activeMenu === tool.id ? 'active' : ''}`}\n            onClick={() => handleToolClick(tool)}\n            title={tool.label}\n          >\n            <img \n              src={`/TradingViewIcons/${tool.icon}.svg`} \n              alt={tool.label} \n              width=\"24\" \n              height=\"24\"\n            />\n            {tool.hasSubmenu && (\n              <span className=\"submenu-indicator\">▸</span>\n            )}\n          </button>\n        ))}\n      </div>\n      {activeMenu && renderSubmenu()}\n    </div>\n  );\n});\n\nexport default LeftSidebar;","import React, { useState, useEffect } from \"react\";\nimport { calculateCandleCount, isValidCombination, getInvalidMessage } from \"./utils/intervalUtils\";\n\nconst FooterBar = React.memo(({ \n  selectedInterval = { full: \"1 day\", short: \"1D\" }, \n  selectedRange = \"All\",\n  onAxisSettingChange,\n  onRangeChange \n}) => {\n  const [currentTime, setCurrentTime] = useState(new Date());\n  const [axisSettings, setAxisSettings] = useState({\n    auto: true,\n    log: false,\n    percent: false\n  });\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setCurrentTime(new Date());\n    }, 1000);\n\n    return () => clearInterval(timer);\n  }, []);\n\n  const dateRanges = [\"1D\", \"5D\", \"1M\", \"3M\", \"6M\", \"YTD\", \"1Y\", \"5Y\", \"All\"];\n\n  const handleRangeClick = (range) => {\n    const intervalValue = selectedInterval?.full || selectedInterval;\n    if (!isValidCombination(intervalValue, range)) {\n      alert(getInvalidMessage(intervalValue, range));\n      return;\n    }\n    \n    if (onRangeChange) {\n      onRangeChange(range);\n    }\n  };\n\n  const handleAxisSetting = (setting) => {\n    const newSettings = { ...axisSettings };\n    \n    if (setting === \"auto\") {\n      newSettings.auto = !axisSettings.auto;\n    } else if (setting === \"log\") {\n      newSettings.log = !axisSettings.log;\n      // Log and percent are mutually exclusive\n      if (newSettings.log) newSettings.percent = false;\n    } else if (setting === \"percent\") {\n      newSettings.percent = !axisSettings.percent;\n      // Log and percent are mutually exclusive\n      if (newSettings.percent) newSettings.log = false;\n    }\n    \n    setAxisSettings(newSettings);\n    if (onAxisSettingChange) {\n      onAxisSettingChange(setting, newSettings);\n    }\n  };\n\n  const getCandleCount = (range) => {\n    const intervalValue = selectedInterval?.full || selectedInterval;\n    const count = calculateCandleCount(intervalValue, range);\n    return count;\n  };\n\n  const isRangeDisabled = (range) => {\n    const intervalValue = selectedInterval?.full || selectedInterval;\n    return !isValidCombination(intervalValue, range);\n  };\n\n  const handleButtonClick = (action) => {\n    alert(`${action} not implemented`);\n  };\n\n  const formatTime = (date) => {\n    return date.toLocaleTimeString('en-US', {\n      hour12: false,\n      hour: '2-digit',\n      minute: '2-digit',\n      second: '2-digit'\n    }) + \" UTC\";\n  };\n\n  return (\n    <div className=\"footer-bar\">\n      <div className=\"footer-left\">\n        {dateRanges.map(range => (\n          <button\n            key={range}\n            className={`range-button ${selectedRange === range ? 'active' : ''} ${isRangeDisabled(range) ? 'disabled' : ''}`}\n            onClick={() => handleRangeClick(range)}\n            disabled={isRangeDisabled(range)}\n            title={isRangeDisabled(range) ? getInvalidMessage(selectedInterval?.full || selectedInterval, range) : `${getCandleCount(range)} candles`}\n          >\n            {range}\n          </button>\n        ))}\n      </div>\n\n      <div className=\"footer-center\">\n        <div className=\"tradingview-watermark\">\n          <img src=\"/TradingViewIcons/Network.svg\" alt=\"TradingView\" width=\"18\" height=\"18\" />\n          <span>TradingView</span>\n        </div>\n      </div>\n\n      <div className=\"footer-right\">\n        <div className=\"axis-settings\">\n          <button\n            className={`axis-button ${axisSettings.auto ? 'active' : ''}`}\n            onClick={() => handleAxisSetting(\"auto\")}\n            title=\"Auto (fits data to screen)\"\n          >\n            Auto\n          </button>\n          <button\n            className={`axis-button ${axisSettings.log ? 'active' : ''}`}\n            onClick={() => handleAxisSetting(\"log\")}\n            title=\"Log Scale\"\n          >\n            Log\n          </button>\n          <button\n            className={`axis-button ${axisSettings.percent ? 'active' : ''}`}\n            onClick={() => handleAxisSetting(\"percent\")}\n            title=\"Percentage\"\n          >\n            %\n          </button>\n        </div>\n\n        <div className=\"footer-divider\" />\n\n        <button \n          className=\"footer-icon-btn\"\n          onClick={() => handleButtonClick(\"screenshot\")}\n          title=\"Take a snapshot\"\n        >\n          <img src=\"/TradingViewIcons/Camera.svg\" alt=\"Screenshot\" width=\"18\" height=\"18\" />\n        </button>\n\n        <button \n          className=\"footer-icon-btn\"\n          onClick={() => handleButtonClick(\"settings\")}\n          title=\"Settings\"\n        >\n          <img src=\"/TradingViewIcons/Nut.svg\" alt=\"Settings\" width=\"18\" height=\"18\" />\n        </button>\n\n        <div className=\"footer-divider\" />\n\n        <div className=\"current-time\">\n          {formatTime(currentTime)}\n        </div>\n      </div>\n    </div>\n  );\n});\n\nexport default FooterBar;","import React, { useState, useMemo, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { PriceChart } from \"./PriceChart\";\nimport { filterDataByRange } from \"./utils/intervalUtils\";\nimport { transformDataToInterval, canTransformData, getTransformationError } from \"./utils/dataTransformation\";\nimport TopBar from \"./TopBar\";\nimport LeftSidebar from \"./LeftSidebar\";\nimport FooterBar from \"./FooterBar\";\n\n// Memoized chart container to prevent re-renders when menu state changes\nconst MemoizedChartContainer = React.memo(({ data, loaded, axisSettings, error, chartType }) => (\n  <div className=\"chart-container\">\n    {error ? (\n      <div className=\"error-message\">\n        <h3>Data Transformation Error</h3>\n        <p>{error}</p>\n        <p>Please select a different interval or check your data source.</p>\n      </div>\n    ) : loaded && data ? (\n      <PriceChart data={data} axisSettings={axisSettings} chartType={chartType} />\n    ) : loaded && !data ? (\n      <div className=\"error-message\">\n        <p>No data available for the selected time range and interval.</p>\n      </div>\n    ) : (\n      <div className=\"loading-message\">\n        Loading market data...\n      </div>\n    )}\n  </div>\n));\n\nconst TradingChart = ({ \n  data: rawData, \n  dataInterval = \"1 minute\",\n  symbolName = \"SYMBOL\",\n  symbolIcon = \"📈\",\n  defaultInterval = { full: \"1 minute\", short: \"1m\" },\n  defaultChartType = \"candles\",\n  defaultRange = \"All\",\n  showTopBar = true,\n  showLeftSidebar = true,\n  showFooterBar = true,\n  onIntervalChange,\n  onChartTypeChange,\n  onRangeChange,\n  onAxisSettingChange,\n  className = \"\"\n}) => {\n  const [selectedInterval, setSelectedInterval] = useState(defaultInterval);\n  const [selectedChartType, setSelectedChartType] = useState(defaultChartType);\n  const [axisSettings, setAxisSettings] = useState({\n    auto: true,\n    log: false,\n    percent: false\n  });\n  const [selectedRange, setSelectedRange] = useState(defaultRange);\n  const [transformationError, setTransformationError] = useState(null);\n\n  // Transform and filter data based on selected interval and range\n  const processedData = useMemo(() => {\n    if (!rawData) return null;\n\n    try {\n      setTransformationError(null);\n      \n      // First, check if transformation is possible\n      const targetInterval = selectedInterval?.full || selectedInterval;\n      if (!canTransformData(dataInterval, targetInterval)) {\n        const error = getTransformationError(dataInterval, targetInterval);\n        setTransformationError(error);\n        return null;\n      }\n\n      // Transform data to selected interval\n      let transformedData;\n      try {\n        transformedData = transformDataToInterval(rawData, targetInterval);\n      } catch (error) {\n        setTransformationError(error.message);\n        return null;\n      }\n\n      // Then filter by selected range\n      return filterDataByRange(transformedData, selectedRange);\n    } catch (error) {\n      console.error(\"Data processing error:\", error);\n      setTransformationError(\"Failed to process data\");\n      return null;\n    }\n  }, [rawData, selectedInterval, selectedRange, dataInterval]);\n\n  // Memoize handlers to prevent unnecessary re-renders\n  const handleIntervalChange = useCallback((interval) => {\n    setSelectedInterval(interval);\n    if (onIntervalChange) {\n      onIntervalChange(interval);\n    }\n  }, [onIntervalChange]);\n\n  const handleChartTypeChange = useCallback((chartType) => {\n    setSelectedChartType(chartType);\n    if (onChartTypeChange) {\n      onChartTypeChange(chartType);\n    }\n  }, [onChartTypeChange]);\n\n  const handleAxisSettingChange = useCallback((setting, newSettings) => {\n    setAxisSettings(newSettings);\n    if (onAxisSettingChange) {\n      onAxisSettingChange(setting, newSettings);\n    }\n  }, [onAxisSettingChange]);\n\n  const handleRangeChange = useCallback((range) => {\n    setSelectedRange(range);\n    if (onRangeChange) {\n      onRangeChange(range);\n    }\n  }, [onRangeChange]);\n\n  return (\n    <div className={`app-container ${className}`}>\n      {showTopBar && (\n        <TopBar \n          selectedInterval={selectedInterval}\n          selectedChartType={selectedChartType}\n          symbolName={symbolName}\n          symbolIcon={symbolIcon}\n          onIntervalChange={handleIntervalChange}\n          onChartTypeChange={handleChartTypeChange}\n        />\n      )}\n      \n      <div className=\"app-content\">\n        {showLeftSidebar && <LeftSidebar />}\n        <MemoizedChartContainer \n          data={transformationError ? null : processedData} \n          loaded={true} \n          axisSettings={axisSettings}\n          error={transformationError}\n          chartType={selectedChartType}\n        />\n      </div>\n      \n      {showFooterBar && (\n        <FooterBar \n          selectedInterval={selectedInterval}\n          selectedRange={selectedRange}\n          onAxisSettingChange={handleAxisSettingChange}\n          onRangeChange={handleRangeChange}\n        />\n      )}\n    </div>\n  );\n};\n\nTradingChart.propTypes = {\n  data: PropTypes.arrayOf(\n    PropTypes.shape({\n      date: PropTypes.instanceOf(Date).isRequired,\n      open: PropTypes.number.isRequired,\n      high: PropTypes.number.isRequired,\n      low: PropTypes.number.isRequired,\n      close: PropTypes.number.isRequired,\n      volume: PropTypes.number.isRequired\n    })\n  ).isRequired,\n  dataInterval: PropTypes.string,\n  symbolName: PropTypes.string,\n  symbolIcon: PropTypes.string,\n  defaultInterval: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.shape({\n      full: PropTypes.string.isRequired,\n      short: PropTypes.string.isRequired\n    })\n  ]),\n  defaultChartType: PropTypes.string,\n  defaultRange: PropTypes.string,\n  showTopBar: PropTypes.bool,\n  showLeftSidebar: PropTypes.bool,\n  showFooterBar: PropTypes.bool,\n  onIntervalChange: PropTypes.func,\n  onChartTypeChange: PropTypes.func,\n  onRangeChange: PropTypes.func,\n  onAxisSettingChange: PropTypes.func,\n  className: PropTypes.string\n};\n\nexport default TradingChart;","import { useEffect, useRef, useState } from \"react\";\nimport { tsvParse } from \"d3-dsv\";\nimport { timeParse } from \"d3-time-format\";\n\nconst parseDate = timeParse(\"%Y-%m-%d\");\n\nconst parseData = () => (d) => {\n  const date = parseDate(d.date);\n  date ? (d.date = new Date(date)) : (d.date = new Date(Number(d.date)));\n\n  for (const key in d) {\n    if (key !== \"date\" && Object.prototype.hasOwnProperty.call(d, key)) {\n      d[key] = +d[key];\n    }\n  }\n\n  return d;\n};\n\n// https://www.joshwcomeau.com/snippets/react-hooks/use-interval/\nconst useInterval = (callback, delay) => {\n  const intervalRef = useRef(null);\n  const savedCallback = useRef(callback);\n  useEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n  useEffect(() => {\n    const tick = () => savedCallback.current();\n    if (typeof delay === \"number\") {\n      intervalRef.current = window.setInterval(tick, delay);\n      return () => window.clearInterval(intervalRef.current);\n    }\n  }, [delay]);\n  return intervalRef;\n};\n\nexport function useMarketData(dataSet = \"MINUTES\", updating = false) {\n  const [data, setData] = useState();\n  const [length, setLength] = useState(500);\n\n  useEffect(() => {\n    if (!data) {\n      fetch(\n        `https://raw.githubusercontent.com/reactivemarkets/react-financial-charts/master/packages/stories/src/data/${dataSet}.tsv`\n      )\n        .then((response) => response.text())\n        .then((data) => tsvParse(data, parseData()))\n        .then((data) => {\n          setData(data);\n        });\n    }\n  }, [data, dataSet, setData]);\n\n  useInterval(() => {\n    if (data && updating) setLength(length + 1);\n  }, 1000);\n\n  return {\n    data: updating ? data?.slice(0, length + 1) : data,\n    loaded: Boolean(data)\n  };\n}\n","// Main exports for the react-advanced-trading-chart package\nexport { PriceChart, PriceChartBase } from '../PriceChart';\nexport { default as TradingChart } from '../TradingChart';\nexport { default as TopBar } from '../TopBar';\nexport { default as LeftSidebar } from '../LeftSidebar';\nexport { default as FooterBar } from '../FooterBar';\nexport { default as OHLCTooltip } from '../OHLCTooltip';\nexport { useMarketData } from '../useMarketData';\n\n// Utility exports\nexport { \n  transformDataToInterval, \n  canTransformData, \n  getTransformationError \n} from '../utils/dataTransformation';\nexport { filterDataByRange } from '../utils/intervalUtils';\n\n// CSS styles (users will need to import this manually)\n// Note: Import '../styles.css' directly in your React app\n\n// Chart types enum for easier usage\nexport const CHART_TYPES = {\n  CANDLES: 'candles',\n  BARS: 'bars',\n  HOLLOW: 'hollow',\n  VOLUME: 'volume',\n  LINE: 'line',\n  LINE_MARKERS: 'lineMarkers',\n  STEP: 'step',\n  AREA: 'area',\n  HLC_AREA: 'hlcArea',\n  BASELINE: 'baseline',\n  COLUMNS: 'columns',\n  HIGH_LOW: 'highLow',\n  HEIKIN_ASHI: 'heikinAshi',\n  RENKO: 'renko',\n  KAGI: 'kagi',\n  POINT_FIGURE: 'pointFigure',\n  LINE_BREAK: 'lineBreak',\n  RANGE: 'range'\n};\n\n// Interval options for easier usage\nexport const INTERVALS = [\n  { full: \"1 second\", short: \"1s\" },\n  { full: \"5 seconds\", short: \"5s\" },\n  { full: \"10 seconds\", short: \"10s\" },\n  { full: \"15 seconds\", short: \"15s\" },\n  { full: \"30 seconds\", short: \"30s\" },\n  { full: \"1 minute\", short: \"1m\" },\n  { full: \"2 minutes\", short: \"2m\" },\n  { full: \"3 minutes\", short: \"3m\" },\n  { full: \"5 minutes\", short: \"5m\" },\n  { full: \"10 minutes\", short: \"10m\" },\n  { full: \"15 minutes\", short: \"15m\" },\n  { full: \"30 minutes\", short: \"30m\" },\n  { full: \"1 hour\", short: \"1h\" },\n  { full: \"2 hours\", short: \"2h\" },\n  { full: \"3 hours\", short: \"3h\" },\n  { full: \"4 hours\", short: \"4h\" },\n  { full: \"6 hours\", short: \"6h\" },\n  { full: \"8 hours\", short: \"8h\" },\n  { full: \"12 hours\", short: \"12h\" },\n  { full: \"1 day\", short: \"1d\" },\n  { full: \"3 days\", short: \"3d\" },\n  { full: \"1 week\", short: \"1w\" },\n  { full: \"1 month\", short: \"1M\" }\n];\n\n// Time ranges for easier usage\nexport const TIME_RANGES = [\n  \"1D\", \"5D\", \"1M\", \"3M\", \"6M\", \"YTD\", \"1Y\", \"5Y\", \"All\"\n];"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","d3Extent","values","valueof","min","max","value","undefined","index","identity","d","getClosestItemIndexes","array","accessor","lo","hi","mid","Math","round","lowItemValue","highItemValue","valueOf","left","right","shallowEqual","a","b","keys","functor","v","d3Window","node","ownerDocument","defaultView","document","MOUSEENTER","MOUSELEAVE","MOUSEMOVE","MOUSEUP","TOUCHMOVE","TOUCHEND","getTouchProps","touch","pageX","pageY","clientX","clientY","head","isDefined","last","isNotDefined","touchPosition","e","container","currentTarget","rect","getBoundingClientRect","x","clientLeft","y","top","clientTop","mousePosition","defaultRect","clearCanvas","canvasList","ratio","forEach","each","setTransform","clearRect","canvas","width","height","scale","INFINITY","MAX_SAFE_INTEGER","argsTag","funcTag","genTag","freeGlobal","global","freeSelf","self","root","Function","objectProto","objectToString","toString","Symbol","propertyIsEnumerable","spreadableSymbol","isConcatSpreadable","baseFlatten","depth","predicate","isStrict","result","isFlattenable","isArray","isObjectLike","isLength","tag","type","isObject","isFunction","isArrayLike","isArrayLikeObject","isArguments","Array","lodash_flattendeep","ChartDefaultConfig","flipYScale","id","origin","padding","yPan","yPanEnabled","yScale","scaleLinear","func","obj","object","iteratee","props","mapObject","isArraySize2AndNumber","yExtentsProp","getNewChartConfig","innerDimension","children","existingChartConfig","React","Children","map","chartProps","yExtents","yScaleProp","yExtentsCalculator","copy","availableHeight","getDimensions","prevChartConfig","find","originalYExtentsProp","domain","filter","getCurrentCharts","chartConfig","mouseXY","eachConfig","bottom","config","getChartConfigWithUpdatedYScales","plotData","xAccessor","displayXAccessor","fullData","xDomain","dy","chartsToPan","yDomains","realYDomain","yValues","eachExtent","allYValues","flattenDeep","invert","extent","Set","yDomainFromYExtents","yDomainDY","range","prevYDomain","combine","zip","_a","n","m","d3_zipLength","zips","j","zipper","another","indexOf","newYScale","rangeRoundPoints","isNaN","Error","rangeRound","setRange","getCurrentItem","xScale","xValue","item","leftItem","rightItem","abs","getClosestItem","dr","idx","reduce","xhtml","namespaces","svg","xlink","xml","xmlns","namespace","name","prefix","slice","space","local","creatorInherit","uri","namespaceURI","documentElement","createElement","createElementNS","creatorFixed","fullname","creator","none","selector","querySelector","from","empty","childMatcher","matches","childFirst","firstElementChild","sparse","update","EnterNode","parent","datum","_next","_parent","__data__","bindIndex","group","enter","exit","data","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","Map","keyValues","has","set","get","delete","ascending","NaN","attrRemove","removeAttribute","attrRemoveNS","removeAttributeNS","attrConstant","setAttribute","attrConstantNS","setAttributeNS","attrFunction","attrFunctionNS","styleRemove","style","removeProperty","styleConstant","priority","setProperty","styleFunction","propertyRemove","propertyConstant","propertyFunction","classArray","string","trim","split","classList","ClassList","_node","_names","getAttribute","classedAdd","names","list","add","classedRemove","remove","classedTrue","classedFalse","classedFunction","textRemove","textContent","textConstant","textFunction","htmlRemove","innerHTML","htmlConstant","htmlFunction","raise","nextSibling","parentNode","appendChild","lower","previousSibling","insertBefore","firstChild","constantNull","removeChild","selection_cloneShallow","clone","cloneNode","selection_cloneDeep","onRemove","typename","on","__on","o","removeEventListener","listener","options","onAdd","event","contextListener","addEventListener","push","dispatchEvent","params","window","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","dispatchConstant","dispatchFunction","constructor","child","next","querySelectorAll","join","splice","contains","Selection","groups","parents","_groups","_parents","select","sourceEvent","pointer","ownerSVGElement","createSVGPoint","point","matrixTransform","getScreenCTM","inverse","pointers","events","touches","subgroups","subnode","subgroup","selectAll","arrayAll","selectorAll","selectChild","match","childFind","selectChildren","childrenFilter","matcher","bind","enterGroup","updateGroup","previous","i0","i1","_enter","_exit","onenter","onupdate","onexit","append","merge","order","selection","groups0","groups1","m0","m1","merges","group0","group1","compareDocumentPosition","sort","compare","compareNode","sortgroups","sortgroup","callback","nodes","size","attr","getAttributeNS","getPropertyValue","getComputedStyle","styleValue","property","classed","text","html","create","insert","before","deep","t","typenames","parseTypenames","dispatch","iterator","__rest","s","p","getOwnPropertySymbols","EventCapture","Component","super","dx","mouseInside","mouseInteraction","ref","createRef","handleEnter","onMouseEnter","state","panInProgress","dragInProgress","current","handleMouseMove","handleLeave","onMouseLeave","handleWheel","pan","onPan","zoom","onZoom","yZoom","deltaY","deltaX","preventDefault","focus","zoomDir","shouldPan","panStart","panStartXScale","lastNewPos","panHappened","dxdy","currentCharts","setState","panOrigin","queuePanEnd","onMouseMove","mouseMove","handleClick","onClick","onDoubleClick","dragHappened","clicked","setTimeout","handleRightClick","stopPropagation","onContextMenu","onPanEnd","handleDrag","onDrag","dragStartPosition","startPos","handleDragEnd","onDragComplete","canPan","getAllPanConditions","initialPanEnabled","panEnabled","draggable","somethingSelected","returnObj","handleMouseDown","button","onMouseDown","handlePan","handlePanEnd","onDragStart","handleTouchMove","handleTouchStart","touchXY","handlePinchZoom","handlePinchZoomEnd","touch1Pos","touch2Pos","pinchZoomStart","zoomEnabled","onPinchZoom","initialPinch","onPinchZoomEnd","setCursorClass","cursorOverrideClass","componentDidMount","disableInteraction","passive","componentDidUpdate","componentWillUnmount","panEndTimeout","clearTimeout","cancelDrag","render","useCrossHairStyleCursor","className","interactionProps","onTouchStart","onTouchMove","opacity","defaultProps","panSpeedMultiplier","CanvasContainer","PureComponent","bgRef","axesRef","mouseRef","getCanvasContexts","_b","_c","_d","_e","_f","bg","getContext","axes","mouseCoord","adjustedWidth","adjustedHeight","canvasStyle","position","getNewEnd","fallbackEnd","initialXScale","start","lastItem","lastItemX","lastItemXValue","rangeStart","rangeEnd","extentsWrapper","useWholeData","clamp","pointsPerPxThreshold","minPointsPerPxThreshold","flipXScale","filterData","inputDomain","currentPlotData","currentDomain","fallbackStart","ignoreThresholds","clampedDomain","filteredData","getFilteredResponse","realInputDomain","floor","chartWidth","arrayLength","maxThreshold","minThreshold","widthAdjustedMinThreshold","threshold","ceil","showMinThreshold","widthAdjustedMaxTheshold","showMaxThreshold","canShowTheseManyPeriods","newEnd","showMax","newLeftIndex","newRightIndex","CANDIDATES_FOR_RESET","noop","chartCanvasContextDefaultValue","amIOnTop","chartConfigs","chartId","getMutableState","margin","subscribe","unsubscribe","redraw","ChartCanvasContext","createContext","getXScaleDirection","calculateFullData","plotFull","evaluator","resetChart","calculateState","initialPlotData","postCalculator","inputXAccessor","xExtents","xExtentsProp","direction","dimensions","updatedXScale","setXRange","pinchCoordinates","pinch","topLeft","bottomRight","isInteractionEnabled","ChartCanvas","canvasContainerRef","eventCaptureRef","lastSubscriptionId","mutableState","currentItem","subscriptions","generateSubscriptionId","rest","getPanConditions","concat","dragableComponents","handleContextMenu","triggerEvent","calculateStateForDomain","newDomain","initialChartConfig","beforePlotData","updatedScale","pinchZoomHelper","finalPinch","initialPinchXScale","iTL","iBR","fTL","fBR","xDash","yDash","waitingForPinchZoomAnimationFrame","requestAnimationFrame","clearBothCanvas","draw","trigger","clearThreeCanvas","firstItem","scale_start","data_start","scale_end","data_end","onLoadAfter","onLoadBefore","handleZoom","zoomDirection","zoomMultiplier","zoomAnchor","cx","c","show","xAxisZoom","yAxisZoom","force","panHelper","hackyWayToStopPanBeyondBounds__plotData","hackyWayToStopPanBeyondBounds__domain","waitingForPanAnimationFrame","newState","_","__","handleMouseEnter","waitingForMouseMoveAnimationFrame","prevMouseXY","clearMouseCanvas","handleMouseLeave","handleDragStart","handleDoubleClick","resetYDomain","changed","newChartConfig","getDerivedStateFromProps","interaction","shouldReset","thisProps","lastProps","nextProps","every","end","prevLastItem","calculatedState","previousX","lastItemWasVisible","lastXItem","maintainPointsPerPixelOnResize","newRangeStart","newRangeEnd","newDomainExtent","response","newStart","updateChart","propIteration","getSnapshotBeforeUpdate","prevProps","prevState","canvases","getContextValues","shouldComponentUpdate","disablePan","disableZoom","zIndex","defaultFocus","mouseMoveEvent","cursorStyle","cursor","Provider","transform","ChartContext","memo","chartCanvasContextValue","useContext","useCallback","moreProps","useEffect","contextValue","useMemo","displayName","aliases","mouseleave","panend","pinchzoom","mousedown","click","contextmenu","dblclick","dragstart","dragend","dragcancel","GenericComponent","context","evaluationInProgress","iSetTheCursorClass","updateMoreProps","evaluateType","drawOnCanvas","getMoreProps","isHover","preCanvasDraw","postCanvasDraw","shouldTypeProceed","preEvaluate","subscriberId","updateCount","newType","drawOn","hovering","onUnHover","onContextMenuWhenHover","onClickOutside","onClickWhenHover","prevHover","selected","onHover","interactiveCursorClass","onDoubleClickWhenHover","enableDragOnHover","canvasDraw","UNSAFE_componentWillMount","clip","edgeClip","UNSAFE_componentWillReceiveProps","nextContext","morePropsDecorator","ctx","canvasToDraw","svgDraw","clipPath","contexts","contextType","ALWAYS_TRUE_TYPES","GenericChartComponent","save","canvasOriginX","canvasOriginY","beginPath","translate","restore","chartConfigList","ox","oy","ToolTipText","fontFamily","fontSize","ToolTipTSpanLabel","fill","OHLCTooltip","renderSVG","changeFormat","displayTexts","displayValuesFor","fontWeight","labelFill","labelFontWeight","ohlcFormat","originProp","percentFormat","textFill","volumeFormat","open","na","high","low","close","change","volume","valueFill","h","l","propTypes","PropTypes","number","format","axisStyles","strokeStyle","strokeWidth","tickLabelFill","tickStrokeStyle","gridLinesStrokeStyle","coordinateStyles","zoomButtonStyles","fillOpacity","crossHairStyles","openCloseColor","_ref","FinancialChart","_ref2","initialData","dateTimeFormat","priceDisplayFormat","axisSettings","auto","log","percent","chartType","resetCount","setResetCount","useState","transformedData","heikinAshi","haCalculator","renko","boxSize","sourcePath","renkoCalculator","kagi","reverseType","windowSize","reverseValue","kagiCalculator","pfData","pointAndFigure","pfCalculator","console","error","warn","timeDisplayFormat","timeFormat","xScaleProvider","discontinuousTimeScaleProviderBuilder","inputDateAccessor","date","scaleLog","customYExtentsCalculator","firstPrice","_ref3","percentChange","customPriceFormat","parseInt","barChartHeight","seriesName","lastVisibleItemBasedZoomAnchor","Chart","barChartOrigin","BarSeries","fillStyle","yAccessor","XAxis","showGridLines","MouseCoordinateX","displayFormat","YAxis","tickFormat","MouseCoordinateY","rectWidth","EdgeIndicator","itemType","lineStroke","renderPriceSeries","OHLCSeries","stroke","CandlestickSeries","candleStrokeWidth","maxVolume","volumeOpacity","padStart","LineSeries","Fragment","ScatterSeries","marker","CircleMarker","markerProps","r","curve","curveStepAfter","AreaSeries","AreaOnlySeries","base","baseAt","RenkoSeries","up","down","partial","KagiSeries","yang","yin","currentValueStroke","boxes","PointAndFigureSeries","ZoomButtons","onReset","CrossHairCursor","arrayOf","shape","instanceOf","Date","isRequired","bool","PriceChartBase","PriceChart","withSize","withDeviceRatio","intervalToMinutes","rangeToMinutes","YTD","All","rangeToDays","isValidCombination","interval","includes","intervalMinutes","rangeMinutes","getInvalidMessage","filterDataByRange","endDate","startDate","getTime","getFullYear","parseInterval","intervalStr","full","unit","toLowerCase","getMinutesFromUnit","canTransformData","rawDataInterval","targetInterval","rawParsed","targetParsed","rawMinutes","targetMinutes","aggregateCandles","candles","firstCandle","lastCandle","candle","transformDataToInterval","rawData","currentGroup","groupStartTime","dataPoint","dataTime","bucketStart","minutes","getMinutes","setMinutes","hours","getHours","setHours","daysSinceEpoch","alignedDays","dayOfWeek","getDay","setDate","getDate","getMonth","monthsAligned","setMonth","aggregated","getTransformationError","TopBar","selectedInterval","selectedChartType","symbolName","symbolIcon","onIntervalChange","onChartTypeChange","onUndo","onRedo","showIntervalMenu","setShowIntervalMenu","showChartTypeMenu","setShowChartTypeMenu","intervalRef","useRef","chartTypeRef","handleClickOutside","intervals","TICKS","short","SECONDS","MINUTES","HOURS","DAYS","RANGES","chartTypes","label","icon","handleButtonClick","action","alert","getSelectedIntervalShort","category","entries","items","intervalObj","handleIntervalClick","src","alt","handleChartTypeClick","title","viewBox","strokeLinecap","strokeLinejoin","LeftSidebar","activeMenu","setActiveMenu","activeTool","setActiveTool","sidebarRef","trendTools","fibonacciTools","drawingTools","handleSubtoolClick","subtool","hasSubmenu","tool","handleToolClick","renderSubmenu","FooterBar","selectedRange","onAxisSettingChange","onRangeChange","currentTime","setCurrentTime","setAxisSettings","timer","setInterval","clearInterval","handleAxisSetting","setting","newSettings","getCandleCount","count","calculateCandleCount","days","totalTicks","tickValue","totalRanges","rangeValue","isRangeDisabled","intervalValue","handleRangeClick","disabled","toLocaleTimeString","hour12","hour","minute","second","MemoizedChartContainer","loaded","TradingChart","dataInterval","defaultInterval","defaultChartType","defaultRange","showTopBar","showLeftSidebar","showFooterBar","setSelectedInterval","setSelectedChartType","setSelectedRange","transformationError","setTransformationError","processedData","message","handleIntervalChange","handleChartTypeChange","handleAxisSettingChange","handleRangeChange","oneOfType","parseDate","timeParse","useMarketData","dataSet","updating","setData","setLength","fetch","then","tsvParse","Number","useInterval","delay","savedCallback","tick","Boolean","CHART_TYPES","CANDLES","BARS","HOLLOW","VOLUME","LINE","LINE_MARKERS","STEP","AREA","HLC_AREA","BASELINE","COLUMNS","HIGH_LOW","HEIKIN_ASHI","RENKO","KAGI","POINT_FIGURE","LINE_BREAK","RANGE","INTERVALS","TIME_RANGES"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69]}